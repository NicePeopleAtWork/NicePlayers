<!DOCTYPE html>
<html>
<head>
	<title>Video.js | HTML5 Video Player</title>

	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="lib/bootstrap.min.css">
	<!-- Chang URLs to wherever Video.js files will be hosted -->
	<link href="lib/video-js.css" rel="stylesheet" type="text/css">

	<!-- playlists -->
	<link href="lib/playlists.css" rel="stylesheet">


	<script src="lib/jquery-1.11.3.min.js"></script>

	<!-- Latest compiled and minified JavaScript -->
	<script src="lib/bootstrap.min.js"></script>

	<!-- video.js must be in the <head> for older IEs to work. -->
	<script src="lib/video.min.js"></script>

	<!-- Media Sources plugin -->
	<script src="lib/videojs-media-sources.js"></script>

	<!-- HLS plugin -->
	<script src="lib/videojs-hls.js"></script>

	<!-- Playlis plugin -->
	<script src="lib/videojs-playlists.js" data-cover></script>

	<!-- segment handling -->
	<script src="lib/xhr.js"></script>
	<script src="lib/flv-tag.js"></script>
	<script src="lib/stream.js"></script>
	<script src="lib/exp-golomb.js"></script>
	<script src="lib/h264-extradata.js"></script>
	<script src="lib/h264-stream.js"></script>
	<script src="lib/aac-stream.js"></script>
	<script src="lib/metadata-stream.js"></script>
	<script src="lib/segment-parser.js"></script>

	<!-- m3u8 handling -->
	<script src="lib/m3u8/m3u8-parser.js"></script>
	<script src="lib/playlist-loader.js"></script>

	<script src="lib/pkcs7.unpad.js"></script>
	<script src="lib/decrypter.js"></script>

	<script src="lib/bin-utils.js"></script>

	<!-- Youbora -->
	<script src="/src/v1/1.4/js/libs/youbora-data-1.4.1.js"></script>
	<script src="/src/v1/1.4/js/libs/youbora-api-1.4.3-nqs.js"></script>

	<!-- SP -->
	<script src="/src/v1/1.4/js/pc-videojs/3.4.3/sp.js"></script>

	<script src="../utils/player-form-utils.js"></script>


</head>
<body>

	<div class="container-fluid ">
		<p>&nbsp;</p>

		<div class="row">
			<div class="col-md-7 ">
				<div class="panel panel-default">
					<div class="panel-heading"><h4>Player</h4></div>
					<div class="panel-body">

						<div id="menu-player" class="btn-group">
							<div type="button" class="btn btn-primary active" onclick="changePlayer('single')" class-toggle="active">Single player</div>
							<div type="button" class="btn btn-primary" onclick="changePlayer('multiplayer')" class-toggle="active">Multi player</div>
							<div type="button" class="btn btn-primary" onclick="changePlayer('playlist')" class-toggle="active">Playlist</div>
							<div type="button" class="btn btn-primary" onclick="changePlayer('live')" class-toggle="active">live</div>
						</div>

						<div id="menu-video-type" class="btn-group right" role="group" style="float:right;">
							<button type="button" class="btn btn-primary active" onclick="changeVideoType('http')" class-toggle="active">HTTP</button>
							<button type="button" class="btn btn-primary" onclick="changeVideoType('hls')" class-toggle="active">HLS</button>
							<button type="button" class="btn btn-primary disabled" onclick="changeVideoType('dash')">DASH</button>
							<button type="button" class="btn btn-primary disabled" onclick="changeVideoType('ss')">SS</button>
						</div>
						<div class="clear"><p>&nbsp;</p></div>

						<div id="video-container"></div>
					</div>
				</div>

			</div>


			<div class="col-md-5 ">
				<div class="panel panel-default">
					<div class="panel-heading">
						<h4>
							Plugin Options
							<button class="btn btn-primary button_update" style="float: right; margin-top: -8px;">Update</button>
						</h4>
					</div>
					<div class="panel-body">

						<div class="row">
							<div class="col-md-6">
								<div class="form-group">
								    <label for="testType">Test Type:</label>
								    <select id="testType" class="form-control">
										<option value="A">A</option>
										<option value="B">B</option>
										<!-- <option value="C">C</option>
										<option value="D">D</option>
										<option value="E">E</option>
										<option value="F">F</option>
										<option value="G">G</option>
										<option value="H">H</option>
										<option value="I">I</option> -->
									</select>
								</div>
							</div>

							<div class="col-md-6">
								<div class="form-group">
								    <label for="destination">Destination:</label>
								    <select id="destination" class="form-control">
										<option value="A">Debug</option>
										<option value="B">Production</option>
									</select>
								</div>
							</div>
						</div>

						<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
							<div class="panel panel-default">
							    <div class="panel-heading" role="tab" id="headingOne">
							        <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
							      		<h4 class="panel-title">Account Parameters</h4>
							        </a>
							    </div>
							    <div id="collapseOne" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
							      <div class="panel-body">

										<div class="row">
											<div class="col-md-6">
												<div class="form-group">
												    <label for="accountCode">AccountCode *</label>
												    <input class="form-control" id="accountCode">
												</div>
											</div>

											<div class="col-md-6">
												<div class="form-group">
												    <label for="username">Username</label>
												    <input class="form-control" id="username">
												</div>
											</div>
										</div>

										<div class="row">
											<div class="col-md-6">
												<div class="form-group">
												    <label for="transaction">Transaction</label>
												    <input class="form-control" id="transaction">
												</div>
											</div>

											<div class="col-md-6">
												<div class="form-group">
												    <label for="httpSecure">HTTP Secure</label>
												     <select id="httpSecure" class="form-control">
														<option value="false">False</option>
														<option value="true">True</option>
													</select>
												</div>
											</div>
										</div>

										<div class="row">
											<div class="col-md-6">
												<div class="form-group">
												    <label for="isp">ISP</label>
												    <input class="form-control" id="isp">
												</div>
											</div>

											<div class="col-md-6">
												<div class="form-group">
												    <label for="cdn">CDN</label>
												    <input class="form-control" id="cdn">
												</div>
											</div>
										</div>

							      </div>
							    </div>
							</div>

							<div class="panel panel-default">
							    <div class="panel-heading" role="tab" id="headingTwo">
							        <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
										<h4 class="panel-title">Media Properties</h4>
							        </a>
							    </div>
							    <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
							      <div class="panel-body">

										<div class="row">
											<div class="col-md-6">
												<div class="form-group">
												    <label for="duration">Duration</label>
												    <input class="form-control" id="duration">
												</div>
											</div>

											<div class="col-md-6">
												<div class="form-group">
												    <label for="isLive">Is Live</label>
												    <select id="isLive" class="form-control">
														<option value="false">False</option>
														<option value="true">True</option>
													</select>
												</div>
											</div>
										</div>

										<div class="row">
											<div class="col-md-12">
												<div class="form-group">
												    <label for="title">Title</label>
												    <input class="form-control" id="title">
												</div>
											</div>

										</div>

							      </div>
							    </div>
							</div>


							<div class="panel panel-default">
							    <div class="panel-heading" role="tab" id="headingTwo">
							        <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseTwo">
										<h4 class="panel-title">Extra Parameters</h4>
							        </a>
							    </div>
							    <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
							      <div class="panel-body">

										<div class="row">
											<div class="col-md-12">
												<div class="form-group">
												    <label for="extraparam1">Extraparam1</label>
												    <input class="form-control" id="extraparam1">
												</div>
											</div>
										</div>

										<div class="row">
											<div class="col-md-12">
												<div class="form-group">
												    <label for="extraparam2">Extraparam2</label>
												    <input class="form-control" id="extraparam2">
												</div>
											</div>
										</div>
							      </div>
							    </div>
							</div>


						</div>
						<!-- tablist -->

						<button class="btn btn-primary button_update" style="float: right;">Update</button>

					</div>
				</div>
			</div>

		</div>


	</div>


	<!-- PLUGIN INSTANTIATION -->
	<script>

		/*function resizeIframe(obj) {
			obj.style.height = obj.contentWindow.document.body.scrollHeight + 'px';
		}*/

		videojs.options.flash.swf = "video-js.swf";

		var _player = null;
		var _videoType = null;
		var _video = null;
		var _video2 = null;

		var option = null;
		var options = {
			accountCode: 'QA',
			username: '1',
			isLive: false,
			debug: false,
			transaction: 'transactionCode',
			httpSecure: false,
			isp: 'Telefonica ESP',
			cdn: 'maxcdn',
			extraparam1: 'Extraparam1',
			extraparam2: 'Extraparam2',
			properties: {
				filename: "File Name",
				content_id: "Content Id",
				content_metadata: {
						title: "Title",
						genre: "Genre",
						language: "Language",
						year: "Year",
						cast: "Cast",
						director: "Director",
						owner: "Owner",
						duration: "Duration",
						parental: "Parental",
						price: "Price",
						rating: "Rating",
						audioType: "Audio type",
						audioChannels: "Audio channels"
				},
				transaction_type: "Transaction Types",
				quality: "Quality",
				content_type: "Content Type",
				device: {
						manufacturer: "Manufacturer",
						type: "Type",
						year: "Year",
						firmware: "Firmware"
				}
			}
		};

		//manage active class
		$("#menu-player > .btn").click(function(){
		    $("#menu-player > .btn").removeClass("active");
		    $(this).addClass("active");
		});

		$("#menu-video-type > .btn").click(function(){
		    $("#menu-video-type > .btn").removeClass("active");
		    $(this).addClass("active");
		});

		//load default video template
		// moved responsability to player-form-utils.js
		/*$('#video-container').load('video-templates/single-http.html', function() {

			_video = videojs('example_video_1').ready(function() {
				//console.log(sources);
			});

			_video.youbora( options );
		});*/

		function changeVideoType(type) {
			console.log(type);
			_videoType = type;
			this.updateVideo(_player, _videoType);
		}

		function changePlayer(player) {
			_player = player;
			console.log("_player "+_player +"   _videoType "+ _videoType);
			this.updateVideo(_player, _videoType);
		}

		var updateVideo = function(player, videoType) {

			player = player || 'single';
			videoType = videoType || 'http';
			_player = player;
			_videoType = videoType;

			try {
				// event for dispose playlist player on lib/playlists-main.js:115
				$(document).trigger('changeVideoContainer');
			} catch (e)	{}

			try {

				_video.youbora.unLoad();
				_video.dispose();
				_video = null;

				_video2.youbora.unLoad();
				_video2.dispose();
				_video2 = null;

			} catch (e) {}


			// multiplayer, single, playlist
			//single player
			if(player === 'single') {
				if(videoType === 'http') {

					loadVideoToContainer('#video-container', 'video-templates/single-http.html');

				} else if(videoType === 'hls') {

					loadVideoToContainer('#video-container', 'video-templates/single-hls.html');

				} else if(videoType === 'hlsmulti') {

					// hls multi resource

				} else {

					// Smooth Streaming

				}
			}

			// multiplayer
			else if(player === 'multiplayer') {
				if(videoType === 'http') {

					loadVideoToContainer('#video-container', 'video-templates/multi-http.html');

				} else if(videoType === 'hls') {

					loadVideoToContainer('#video-container', 'video-templates/multi-hls.html');

				} else if(videoType === 'hlsmulti') {

					// hls multi resource

				} else {

					// Smooth Streaming

				}
			}

			// live
			else if(player === 'live') {

				loadVideoToContainer('#video-container', 'video-templates/live-hls.html');

			// playlist
			} else {
				if(videoType === 'http') {

					loadVideoToContainer('#video-container', 'video-templates/playlist-http.html');

				} else if (videoType === 'hls') {

					loadVideoToContainer('#video-container', 'video-templates/playlist-hls.html');

				}
			}

			//http, hls, hlsmulti, ss
		}

		function loadVideoToContainer(videoContainer, template) {

			// register plugin
			//videojs.plugin('youbora', Youbora);

			$(videoContainer).load(template, function() {

				if(_player === 'single' || _player === 'live') {

					_video = videojs('example_video_1');
					_video.youbora( options );
					//_video.play();

				} else if (_player === 'multiplayer') {

					_video = videojs('example_video_1');
					_video.youbora( options );

					_video2 = videojs('example_video_2');
					_video2.youbora( options );

				} else {
					//playlist works from lib/playlists-main.js
				}
			});
		}

		//load nqs-Debug in container
		$(function(){
			$('body').append('<div id="nqs-container"></div>');
			$('#nqs-container').load('/players/NQSDebug/frame/frame.html');
		});

	</script>
</body>
</html>