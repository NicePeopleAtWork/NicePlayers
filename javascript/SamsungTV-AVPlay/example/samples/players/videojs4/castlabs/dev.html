<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>castLabs DASH Everywhere Player Integration example</title>
    <!-- Loading Video.js CDN-hosted Scripts from videojs.com -->
    <link href="http://vjs.zencdn.net/4.11.4/video-js.css" rel="stylesheet">
    <script src="http://vjs.zencdn.net/4.11.4/video.js"></script>
    <style>
    .vjs-default-skin .vjs-audiotracks-button:before {
        content: "\e600";
        /* cog icon */
    }
    
    .vjs-default-skin .vjs-texttracks-button:before {
        content: "\e00c";
        /* subtitles icon */
    }
    </style>
    <script src="http://demo.castlabs.com/3.3.1/main/cldasheverywhere.min.js"></script>
    <script src="/src/v5/libs/last-build/youboralib.js" youbora-debug="4"></script>
    <script src="/src/v5/plugins/videojs4/last-build/plugin.js"></script>
</head>

<body onload="nextVideo()">
    <video id="vid" class="video-js vjs-default-skin vjs-big-play-centered" preload="auto" width="640px" height="480px"></video>
    <a href="#" onclick="nextVideo()">Next Video</a>
    <script>
    //Init player
    var config, player, options;
    var config = {
        "customData": {
            "userId": "purchase",
            "sessionId": "p0",
            "merchant": "six"
        },
        "widevineHeader": {
            "provider": "castlabs",
            "contentId": "fkj3ljaSdfalkr3j",
            "trackType": "",
            "policy": ""
        },
        "assetId": "big_buck_bunny2",
        "variantId": "",
        "authenticationToken": null,
        "widevineLicenseServerURL": "https://lic.staging.drmtoday.com/license-proxy-widevine/cenc/",
        "accessLicenseServerURL": "https://lic.staging.drmtoday.com/flashaccess/LicenseTrigger/v1",
        "playReadyLicenseServerURL": "https://lic.staging.drmtoday.com/license-proxy-headerauth/drmtoday/RightsManager.asmx",
        "silverlightFile": "./dashcs/dashcs.xap",
        "flashFile": './dashas/dashas.swf',
        "techs": ['dashjs', 'dashas', 'dashcs']
    };

    var options = {
        accountCode: 'qamini',
        username: 'qases',
        transactionCode: 'transcode',
        httpSecure: false,
        parseHLS: true,
        parseCDNNodeHost: false,

        // params defined
        network: {
            cdn: "AKAMAI",
            ip: "1.1.1.1",
            isp: "ISPa"
        },

        // media Info
        media: {
            title: 'Big Buck Bunny'
        },

        // properties
        properties: {
            content_metadata: {
                genre: "a",
                year: "b",
                cast: "c",
                director: "d",
                owner: "e",
                parental: "f",
                price: "g",
                rating: "h",
                audioType: "i",
                audioChannels: "j",
                language: "es"
            },
            transaction_type: "k",
            quality: "l",
            content_type: "m",
            device: {
                manufacturer: "n",
                type: "o",
                year: "p",
                firmware: "q"
            }
        },

        // extraparams
        extraParams: {
            param1: "param1",
            param2: "param2"
        }
    };

    player = videojs('vid', {
        plugins: {
            audiotracks: {
                title: 'Languages'
            },
            texttracks: {
                title: 'Subtitles'
            },
            youbora: options
        },
        //autoplay: true,
        controls: true,
        dasheverywhere: config,
        techOrder: ['dasheverywhere']
    });

    function nextVideo() {
        //Play protected video
        //player.loadVideo("http://demo.castlabs.com/media/bbb_abr/Manifest.mpd", {});

        //Play unprotected video
        player.loadVideo("http://demo.castlabs.com/media/bbb_abr_unenc/Manifest.mpd", {
            assetId: "",
            variantId: ""
        });
    }
    </script>
</body>

</html>
