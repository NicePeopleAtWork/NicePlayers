<!DOCTYPE html>
<html>

<head>
	<title>JWPlayer V6 - Nice264Plugins</title>

	<script type="text/javascript" src="/src/v1/1.4/js/libs/multiplayer/youbora-data.js"></script>
	<script type="text/javascript" src="/src/v1/1.4/js/libs/youbora-api-1.4.3.js"></script>
	<script type="text/javascript" src="jwplayer/jwplayer.js"></script>

	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>

<body>
	<div id="video_player1"></div>
	<div id="video_player2"></div>

	<script type="text/javascript">
		var system = "demosite";
		var zonecode = "default";
		var origincode = "pdl";
		var niceNVA = "3600";
		var niceNVB = "0";
		var tokenServiceHost = "http://dbb2.nice264.com/niceTokenService/balancedURL.php";

		var urlDataWithCode = tokenServiceHost + "?nva=" + niceNVA +
			"&nvb=" + niceNVB +
			"&system=" + system +
			"&originCode=" + origincode +
			"&zoneCode=" + zonecode +
			"&filepath=" + "http://cdn.s1.eu.nice264.com/converted_work6/0082c06e504b0a422bf1_6815f2deeb179c29748af42f8cd5ce95.mp4" +
			"&playerId=" + "video_player1";

		var xmlHttp = new XMLHttpRequest();
		xmlHttp.addEventListener("load", function (httpEvent) {
			try {

				var responseJson = httpEvent.target.response;
				var response = JSON.parse(responseJson);

				var nva = response.nva;
				var nvb = response.nvb;
				var token = response.token;

				var options = {
					enabled: true,
					balanceType: "balance",
					service: "http://smartswitch.youbora.com/",
					zoneCode: zonecode,
					originCode: origincode,
					niceNVA: nva,
					niceNVB: nvb,
					token: tokenServiceHost,
					niceTokenIp: null,
					live: false
				}

				var matches = /[&\?]playerId=(.*)[&]*.*$/i.exec(httpEvent.currentTarget.responseURL);
				try {
					youboraDataMap.get(matches[1]).setBalanceProperties(options);
				} catch (e) {
					youboraData.setBalanceProperties(options);
				}

			} catch (err) {
				console.log(err);
			}
		}, false);

		xmlHttp.open("GET", urlDataWithCode, true);
		xmlHttp.send();

		function callback() {
			alert("Callback de resume");
		}

		var ydata = youboraDataMap.get('video_player1');
		ydata.setDebug(true);
		ydata.setEnableAnalytics(true);
		ydata.setEnableBalancer(false);

		ydata.setContentId("new");
		ydata.setResumeEnabled(false);
		ydata.setResumeCallback(callback);

		ydata.setConcurrencyCode("newCode");
		ydata.setConcurrencyMaxCount(1);
		ydata.setConcurrencyRedirectUrl("http://www.google.es");
		ydata.concurrencyProperties.enabled = false;

		ydata.setAccountCode(system);
		ydata.setUsername('demosite jwplayer');
		ydata.setService('http://nqs.nice264.com');
		ydata.setLive(false);
		ydata.setProperties({
			filename: "SS_16_9_404p_1100_MP30/fc642fcbbf910bb50ffb.mp4",
			content_id: "fc642fcbbf910bb50ffb",
			content_metadata: {
				title: "Big Buck Bunny",
				genre: "Animation",
				language: "English",
				year: "2011",
				cast: "",
				director: "",
				owner: "nicepeopleatwork",
				duration: "09:27",
				parental: "",
				price: "0.0 USD",
				rating: "",
				audioType: "",
				audioChannels: ""
			},
			transaction_type: "rental",
			quality: "SD",
			content_type: "movie",
			device: {
				manufacturer: "JWPlayer6",
				type: "Browser",
				year: "2014",
				firmware: ""
			}
		});
		ydata.setHttpSecure(true);

		jwplayer("video_player1").setup({
			repeat: "false",
			// PLAYLIST videos from NicePeople
			playlist: [{
				file: "http://cdn.s1.eu.nice264.com/converted_work6/0082c06e504b0a422bf1_6815f2deeb179c29748af42f8cd5ce95.mp4",
				title: "A",
				image: "http://nws.nice264.com/image/nicetv/8ec3374ea05ef76e3a84.jpg",
				properties: {a: "a"},
				live: false
			},
			{
				file: "http://cdn.s1.eu.nice264.com/converted_work6/0082c06e504b0a422bf1_6815f2deeb179c29748af42f8cd5ce95.mp4",
				title: "B",
				image: "http://nws.nice264.com/image/nicetv/8ec3374ea05ef76e3a84.jpg",
				properties: {b: "b"},
				live: false
			}],
			/**/
			plugins: {
				"/src/v1/1.4/js/all-jwplayer/3.1.6/sp.js": {}
			}
			/**/
		})


		/* VIDEO 2 */
		var urlDataWithCode = tokenServiceHost + "?nva=" + niceNVA +
			"&nvb=" + niceNVB +
			"&system=" + system +
			"&originCode=" + origincode +
			"&zoneCode=" + zonecode +
			"&filepath=" + "http://cdn.s1.eu.nice264.com/converted_work6/0082c06e504b0a422bf1_6815f2deeb179c29748af42f8cd5ce95.mp4" +
			"&playerId=" + "video_player2";

		var xmlHttp = new XMLHttpRequest();
		xmlHttp.addEventListener("load", function (httpEvent) {
			try {

				var responseJson = httpEvent.target.response;
				var response = JSON.parse(responseJson);

				var nva = response.nva;
				var nvb = response.nvb;
				var token = response.token;

				var options = {
					enabled: true,
					balanceType: "balance",
					service: "http://smartswitch.youbora.com/",
					zoneCode: zonecode,
					originCode: origincode,
					niceNVA: nva,
					niceNVB: nvb,
					token: tokenServiceHost,
					niceTokenIp: null,
					live: false
				}

				var matches = /[&\?]playerId=(.*)[&]*.*$/i.exec(httpEvent.currentTarget.responseURL);
				try {
					youboraDataMap.get(matches[1]).setBalanceProperties(options);
				} catch (e) {
					youboraData.setBalanceProperties(options);
				}

			} catch (err) {
				console.log(err);
			}
		}, false);

		xmlHttp.open("GET", urlDataWithCode, true);
		xmlHttp.send();

		function callback() {
			alert("Callback de resume");
		}

		var ydata = youboraDataMap.get('video_player2')
		ydata.setDebug(true);
		ydata.setEnableAnalytics(true);
		ydata.setEnableBalancer(false);

		ydata.setContentId("new");
		ydata.setResumeEnabled(false);
		ydata.setResumeCallback(callback);

		ydata.setConcurrencyCode("newCode");
		ydata.setConcurrencyMaxCount(1);
		ydata.setConcurrencyRedirectUrl("http://www.google.es");
		ydata.concurrencyProperties.enabled = false;

		ydata.setAccountCode(system);
		ydata.setUsername('demosite jwplayer');
		ydata.setService('http://nqs.nice264.com');
		ydata.setLive(false);
		ydata.setProperties({
			filename: "SS_16_9_404p_1100_MP30/fc642fcbbf910bb50ffb.mp4",
			content_id: "fc642fcbbf910bb50ffb",
			content_metadata: {
				title: "Big Buck Bunny",
				genre: "Animation",
				language: "English",
				year: "2011",
				cast: "",
				director: "",
				owner: "nicepeopleatwork",
				duration: "09:27",
				parental: "",
				price: "0.0 USD",
				rating: "",
				audioType: "",
				audioChannels: ""
			},
			transaction_type: "rental",
			quality: "SD",
			content_type: "movie",
			device: {
				manufacturer: "JWPlayer6",
				type: "Browser",
				year: "2014",
				firmware: ""
			}
		});
		ydata.setHttpSecure(true);

		jwplayer("video_player2").setup({
			repeat: "false",
			// PLAYLIST videos from NicePeople
			playlist: [{
				file: "http://cdn.s1.eu.nice264.com/converted_work6/0082c06e504b0a422bf1_6815f2deeb179c29748af42f8cd5ce95.mp4",
				title: "Large Movie Test (NPAWPlug)",
				image: "http://nws.nice264.com/image/nicetv/8ec3374ea05ef76e3a84.jpg"
			}],
			/**/
			plugins: {
				"/src/v1/1.4/js/all-jwplayer/3.1.6/sp.js": {}
			}
			/**/
		})
	</script>
</body>

</html>
