<!DOCTYPE html>
<html>
<head>
	<title>Bcove VideoJS | HTML5 Video Player</title>

	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="lib/bootstrap.min.css">

	<script src="lib/jquery-1.11.3.min.js"></script>

	<!-- Latest compiled and minified JavaScript -->
	<script src="lib/bootstrap.min.js"></script>


	<!-- -->
	<script src="lib/jquery.getscripts.min.js"></script>

	<script src="../utils/player-form-utils.js"></script>

	<style>
		.video-js {
			height: 344px;
			width: 610px;
		}
	</style>

</head>
<body>

	<div class="container-fluid ">
		<p>&nbsp;</p>

		<div class="row">
			<div class="col-md-7 ">
				<div class="panel panel-default">
					<div class="panel-heading"><h4>Player</h4></div>
					<div class="panel-body">

						<div id="menu-player" class="btn-group">
							<div type="button" class="btn btn-primary active" onclick="changePlayer('single')" class-toggle="active">Single player</div>
							<div type="button" class="btn btn-primary" onclick="changePlayer('multiplayer')" class-toggle="active">Multi player</div>
							<div type="button" class="btn btn-primary" onclick="changePlayer('playlist')" class-toggle="active">Playlist</div>
							<div type="button" class="btn btn-primary" onclick="changePlayer('ads')" class-toggle="active">Ads</div>
						</div>

						<div id="menu-video-type" class="btn-group right" role="group" style="float:right;">
							<button type="button" class="btn btn-primary active" onclick="changeVideoType('http')" class-toggle="active">HTTP</button>
							<button type="button" class="btn btn-primary" onclick="changeVideoType('hls')" class-toggle="active">HLS</button>
							<button type="button" class="btn btn-primary disabled" onclick="changeVideoType('dash')">DASH</button>
							<button type="button" class="btn btn-primary  disabled" onclick="changeVideoType('ss')">SS</button>
						</div>
						<div class="clear"><p>&nbsp;</p></div>

						<div id="video-container">

						</div>

					</div>
				</div>

			</div>


			<div class="col-md-5 ">
				<div class="panel panel-default">
					<div class="panel-heading">
						<h4>
							Plugin Options
							<button class="btn btn-primary button_update" style="float: right; margin-top: -8px;">Update</button>
						</h4>
					</div>
					<div class="panel-body">

						<div class="row">
							<div class="col-md-6">
								<div class="form-group">
								    <label for="testType">Test Type:</label>
								    <select id="testType" class="form-control">
										<option value="A">A</option>
										<option value="B">B</option>
										<!-- <option value="C">C</option>
										<option value="D">D</option>
										<option value="E">E</option>
										<option value="F">F</option>
										<option value="G">G</option>
										<option value="H">H</option>
										<option value="I">I</option> -->
									</select>
								</div>
							</div>

							<div class="col-md-6">
								<div class="form-group">
								    <label for="destination">Destination:</label>
								    <select id="destination" class="form-control">
										<option value="A">Debug</option>
										<option value="B">Production</option>
									</select>
								</div>
							</div>
						</div>

						<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
							<div class="panel panel-default">
							    <div class="panel-heading" role="tab" id="headingOne">
							        <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
							      		<h4 class="panel-title">Account Parameters</h4>
							        </a>
							    </div>
							    <div id="collapseOne" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
							      <div class="panel-body">

										<div class="row">
											<div class="col-md-6">
												<div class="form-group">
												    <label for="accountCode">AccountCode *</label>
												    <input class="form-control" id="accountCode">
												</div>
											</div>

											<div class="col-md-6">
												<div class="form-group">
												    <label for="username">Username</label>
												    <input class="form-control" id="username">
												</div>
											</div>
										</div>

										<div class="row">
											<div class="col-md-6">
												<div class="form-group">
												    <label for="transaction">Transaction</label>
												    <input class="form-control" id="transaction">
												</div>
											</div>

											<div class="col-md-6">
												<div class="form-group">
												    <label for="httpSecure">HTTP Secure</label>
												     <select id="httpSecure" class="form-control">
														<option value="false">False</option>
														<option value="true">True</option>
													</select>
												</div>
											</div>
										</div>

										<div class="row">
											<div class="col-md-6">
												<div class="form-group">
												    <label for="isp">ISP</label>
												    <input class="form-control" id="isp">
												</div>
											</div>

											<div class="col-md-6">
												<div class="form-group">
												    <label for="cdn">CDN</label>
												    <input class="form-control" id="cdn">
												</div>
											</div>
										</div>

							      </div>
							    </div>
							</div>

							<div class="panel panel-default">
							    <div class="panel-heading" role="tab" id="headingTwo">
							        <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
										<h4 class="panel-title">Media Properties</h4>
							        </a>
							    </div>
							    <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
							      <div class="panel-body">

										<div class="row">
											<div class="col-md-6">
												<div class="form-group">
												    <label for="duration">Duration</label>
												    <input class="form-control" id="duration">
												</div>
											</div>

											<div class="col-md-6">
												<div class="form-group">
												    <label for="isLive">Is Live</label>
												    <select id="isLive" class="form-control">
														<option value="false">False</option>
														<option value="true">True</option>
													</select>
												</div>
											</div>
										</div>

										<div class="row">
											<div class="col-md-12">
												<div class="form-group">
												    <label for="title">Title</label>
												    <input class="form-control" id="title">
												</div>
											</div>

										</div>

							      </div>
							    </div>
							</div>


							<div class="panel panel-default">
							    <div class="panel-heading" role="tab" id="headingTwo">
							        <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseTwo">
										<h4 class="panel-title">Extra Parameters</h4>
							        </a>
							    </div>
							    <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
							      <div class="panel-body">

										<div class="row">
											<div class="col-md-12">
												<div class="form-group">
												    <label for="extraparam1">Extraparam1</label>
												    <input class="form-control" id="extraparam1">
												</div>
											</div>
										</div>

										<div class="row">
											<div class="col-md-12">
												<div class="form-group">
												    <label for="extraparam2">Extraparam2</label>
												    <input class="form-control" id="extraparam2">
												</div>
											</div>
										</div>
							      </div>
							    </div>
							</div>


						</div>
						<!-- tablist -->

						<button class="btn btn-primary button_update" style="float: right;">Update</button>

					</div>
				</div>
			</div>

		</div>


	</div>

	<div id="console"></div>


	<!-- PLUGIN INSTANTIATION -->
	<script>

		//videojs.options.flash.swf = "video-js.swf";

		var _player = null;
		var _videoType = null;
		var _video = null;
		var _video2 = null;
		var option = null;
		var options = {
			accountCode: 'qamini',
			trackAdvertisement: true,
			CDNNodeData: true,
			parseHLS: true
			/*username: 'videojsplugin',
			isLive: false,
			debug: true,
			transaction: 'transactionCode',
			httpSecure: false,
			isp: 'Telefonica ESP',
			cdn: 'maxcdn',
			ip: '1.1.1.1',
			contentId: 'contentId',
			extraparam1: 'Extraparam1',
			extraparam2: 'Extraparam2',
			properties: {
				filename: "File Name",
				content_id: "Content Id",
				content_metadata: {
						title: "Title",
						genre: "Genre",
						language: "Language",
						year: "Year",
						cast: "Cast",
						director: "Director",
						owner: "Owner",
						duration: "Duration",
						parental: "Parental",
						price: "Price",
						rating: "Rating",
						audioType: "Audio type",
						audioChannels: "Audio channels"
				},
				transaction_type: "Transaction Types",
				quality: "Quality",
				content_type: "Content Type",
				device: {
						manufacturer: "Manufacturer",
						type: "Type",
						year: "Year",
						firmware: "Firmware"
				}
			},
			balanceProperties: {
				balanceType: "balance",
				enabled:     false,
				service:     "http://smartswitch.youbora.com/",
				zoneCode:    "default",
				originCode:  "test",
				niceNVA:     "1400775385000",
				niceNVB:     "1398183395000",
				token:       "9c32f41a92a31b6a83dd82b612ff73a5",
				niceTokenIp: null
			},
			concurrencyProperties: {
				enabled: false,
				concurrencyService: "http://pc.youbora.com/cping/",
				concurrencyCode: "testcode",
				concurrencyMaxCount: 1,
				concurrencyRedirectUrl: function(){ document.location.href = "http://www.google.es/"; },
				concurrencyIpMode: false
			},
			resumeProperties: {
				resumeEnabled:   false,
				resumeService:   "http://pc.youbora.com/resume/",
				playTimeService: "http://pc.youbora.com/playTime/",
				resumeCallback:  function(secs){ alert("Resume: "+ secs) },
			}*/
		};

		//manage active class
		$("#menu-player > .btn").click(function(){
		    $("#menu-player > .btn").removeClass("active");
		    $(this).addClass("active");
		});

		$("#menu-video-type > .btn").click(function(){
		    $("#menu-video-type > .btn").removeClass("active");
		    $(this).addClass("active");
		});

		//load default video template
		// moved responsability to player-form-utils.js
		/*$('#video-container').load('video-templates/single-http.html', function() {

			_video = videojs('example_video_1').ready(function() {
				//console.log(sources);
			});

			_video.youbora( options );
		});*/

		function changeVideoType(type) {
			console.log(type);
			_videoType = type;
			this.updateVideo(_player, _videoType);
		}

		function changePlayer(player) {
			_player = player;
			console.log("_player "+_player +"   _videoType "+ _videoType);
			this.updateVideo(_player, _videoType);
		}

		var updateVideo = function(player, videoType) {

			$('#console').html('');

			player = player || 'single';
			videoType = videoType || 'http';
			_player = player;
			_videoType = videoType;

			try {
				// event for dispose playlist player on lib/playlists-main.js:115
				$(document).trigger('changeVideoContainer');
			} catch (e)	{}

			try {
				_video.dispose();
				_video = null;

				_video2.dispose();
				_video2 = null;

			} catch (e) {}


			// multiplayer, single, playlist
			//single player
			if(player === 'single') {
				if(videoType === 'http') {

					loadVideoToContainer('#video-container', 'video-templates/single-http.html');

				} else if(videoType === 'hls') {

					loadVideoToContainer('#video-container', 'video-templates/single-hls.html');

				} else if(videoType === 'hlsmulti') {

					// hls multi resource

				} else {

					// Smooth Streaming

				}
			}

			// multiplayer
			else if(player === 'multiplayer') {
				if(videoType === 'http') {

					loadVideoToContainer('#video-container', 'video-templates/multi-http.html');

				} else if(videoType === 'hls') {

					loadVideoToContainer('#video-container', 'video-templates/multi-hls.html');

				} else if(videoType === 'hlsmulti') {

					// hls multi resource

				} else {

					// Smooth Streaming

				}
			}

			// ADS
			else if(player === 'ads') {

				loadVideoToContainer('#video-container', 'video-templates/single-ads.html');

			// playlist
			} else {
				if(videoType === 'http') {

					loadVideoToContainer('#video-container', 'video-templates/playlist-hls.html');

				} else if (videoType === 'hls') {

					loadVideoToContainer('#video-container', 'video-templates/playlist-hls.html');

				}
			}

			//http, hls, hlsmulti, ss
		}

		function loadVideoToContainer(videoContainer, template) {

			try {

				$(videoContainer).load(template, function() {

			        //resource progressive download or HLS
			        var resource = null;
			        if(_videoType === 'hls') {
			        	resource = '4330414394001';
			        	resource = '3747024716001';

			        } else {
			        	resource = '2869186287001';
			        }

					if(_player === 'single') {

						/*	Monkey-Patch: For Bcove integration, I had to use the library "getScripts", since the cove_player.catalog.load()
						*	method of the catalog of BC, overlapped with jquery.load() method.
						*
						* 	More info: https://github.com/hudsonfoo/jquery-getscripts
						*/
						$.getScripts({
							urls: ['/1.4/js/libs/youbora-data.js',
									//'http://pre.smartplugin.youbora.com/src/v1/1.4/js/libs/youbora-api.js',
									'/1.4/js/libs/youbora-api-1.4.3-nqs.js',
									'http://players.brightcove.net/2564185535001/afcfbccb-0365-40b8-88ef-27cc839d05c9_default/index.min.js',
									'/1.4/js/pc-videojs/3.4.3/sp.js'],
							cache: true,  // Default
							async: false, // Default
							success: function(response) {
								//youboraData.cdn_node_data = true;
							    // Files have loaded
								videojs.options.flash.swf = "video-js.swf";

								// load player, video to catalog, and instantiate youbora plugin
								_video = videojs("bcove_player").ready(function(){
							        bcove_player = this;

							        bcove_player.catalog.getVideo(resource, function(error, video) {
							    		bcove_player.youbora(options);
							        	bcove_player.catalog.load(video);
							        });

									//bcove_player.src("http://uds.ak.o.brightcove.com/2564185535001/2564185535001_3819470867001_CyNhG0zlpL1-1408952771524.mp4");
							    });

							}
						});

					} else if (_player === 'multiplayer') {

						/*	Monkey-Patch: For Bcove integration, I had to use the library "getScripts", since the cove_player.catalog.load()
						*	method of the catalog of BC, overlapped with jquery.load() method.
						*
						* 	More info: https://github.com/hudsonfoo/jquery-getscripts
						*/
						$.getScripts({
							urls: ['/1.4/js/libs/youbora-data.js',
									//'http://pre.smartplugin.youbora.com/src/v1/1.4/js/libs/youbora-api.js',
									'/1.4/js/libs/youbora-api-1.4.3-nqs.js',
									'http://players.brightcove.net/2564185535001/afcfbccb-0365-40b8-88ef-27cc839d05c9_default/index.min.js',
									'/1.4/js/pc-videojs/3.4.3/sp.js'],
							cache: true,  // Default
							async: false, // Default
							success: function(response) {

							    // Files have loaded
								videojs.options.flash.swf = "video-js.swf";

								// load player, video to catalog, and instantiate youbora plugin
								_video = videojs("bcove_player").ready(function(){
							        var bcove_player = this;

							        bcove_player.catalog.getVideo('3747024716001', function(error, video) {
							    		bcove_player.youbora(options);
							        	bcove_player.catalog.load(video);
							        })
							    });


							    // load player, video to catalog, and instantiate youbora plugin
								_video2 = videojs("bcove_player2").ready(function(){
							        var bcove_player = this;

							        var resource;
							        if(_videoType === 'http') {
							        	resource = '4136091835001';
							        	console.log(resource);
							        } else {
							        	resource = '4330414394001';
							        }

							        bcove_player.catalog.getVideo(resource, function(error, video) {
							    		bcove_player.youbora(options);
							        	bcove_player.catalog.load(video);
							        })
							    });

							}
						});

					} else if (_player === 'ads') {
						//player with ads brightcove


						/*	Monkey-Patch: For Bcove integration, I had to use the library "getScripts", since the cove_player.catalog.load()
						*	method of the catalog of BC, overlapped with jquery.load() method.
						*
						* 	More info: https://github.com/hudsonfoo/jquery-getscripts
						*/
						$.getScripts({
							urls: ['/1.4/js/libs/youbora-data.js',
									//'http://pre.smartplugin.youbora.com/src/v1/1.4/js/libs/youbora-api.js',
									'/1.4/js/libs/youbora-api-1.4.3-nqs.js',
									'http://players.brightcove.net/4077387990001/4e118f64-6358-470b-ac66-d7339c56e124_default/index.min.js',
									'/1.4/js/pc-videojs/3.5.0/sp.js'],
							cache: true,  // Default
							async: false, // Default
							success: function(response) {

							    // Files have loaded
								videojs.options.flash.swf = "video-js.swf";

								// load player, video to catalog, and instantiate youbora plugin
								_video = videojs("bcove_player").ready(function(){
							        bcove_player = this;
							    	bcove_player.youbora(options);

									//bcove_player.src("http://uds.ak.o.brightcove.com/2564185535001/2564185535001_3819470867001_CyNhG0zlpL1-1408952771524.mp4");
							    });

							}
						});

					} else {
						//playlist brightcove


						/*	Monkey-Patch: For Bcove integration, I had to use the library "getScripts", since the cove_player.catalog.load()
						*	method of the catalog of BC, overlapped with jquery.load() method.
						*
						* 	More info: https://github.com/hudsonfoo/jquery-getscripts
						*/
						$.getScripts({
							urls: ['http://players.brightcove.net/2564185535001/e00b5796-84bd-4064-a5ae-a3ed2f8c37fb_default/index.min.js',
									'/1.4/js/pc-videojs/3.4.3/sp.js'],
							cache: true,  // Default
							async: false, // Default
							success: function(response) {

							    // Files have loaded
								videojs.options.flash.swf = "video-js.swf";

								// load player, video to catalog, and instantiate youbora plugin
								_video = videojs("bcove_player").ready(function(){
							        bcove_player = this;

							        bcove_player.catalog.getPlaylist('3884644818001', function(error, playlist) {
							    		bcove_player.youbora(options);
							        	bcove_player.catalog.load(playlist);
							        });

									//bcove_player.src("http://uds.ak.o.brightcove.com/2564185535001/2564185535001_3819470867001_CyNhG0zlpL1-1408952771524.mp4");
							    });

							}
						});

					}
				} );
			} catch (e) {
				console.log(e);
			}
		}

		//load nqs-Debug in container
		$(function(){
			$('body').append('<div id="nqs-container"></div>');
			$('#nqs-container').load('/players/NQSDebug/frame/frame.html');
		});

	</script>


</body>
</html>
