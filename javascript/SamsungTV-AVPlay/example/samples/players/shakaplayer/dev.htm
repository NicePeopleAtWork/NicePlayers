<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>TurtleTube - Basic Test</title>
    <!-- Load the Shaka Player library. -->
    <script src="lib/v1.6.5/shaka-player.compiled.js"></script>
    <!---->
    <!-- YouboraLib -->
    <script src="/src/v5/libs/last-build/youboralib.js" youbora-debug="4"></script>
    <script src="/src/v5/plugins/shakaplayer/last-build/plugin.js"></script>
    <!---->
</head>

<body>
    <video id="video1" width="640" height="480" crossorigin="anonymous" controls>
        Your browser does not support HTML5 video.
    </video>
    <script>
    function initPlayer() {
        // Install polyfills.
        shaka.polyfill.installAll();

        // Find the video element.
        var video = document.getElementById('video1');

        // Construct a Player to wrap around it.
        var player = new shaka.player.Player(video);

        // Autoplay
        //player.a.autoplay = true;

        // Attach the player to the window so that it can be easily debugged.
        window.player = player;

        /* Dash */
        var mpdUrl = 'https://turtle-tube.appspot.com/t/t2/dash.mpd';
        var estimator = new shaka.util.EWMABandwidthEstimator();
        var source = new shaka.player.DashVideoSource(mpdUrl, null, estimator);

        /* http * /
        var source = new shaka.player.HttpVideoSource("assets/bear-av-enc.webm", "", {
            'keySystem': 'org.w3.clearkey',
            'licenseServerUrl': 'assets/test_license.json'
        });
        /**/

        // Load the source into the Player.
        player.load(source);

        // init youbora
        window.youbora = new $YB.plugins.Shaka(player, {
            accountCode: 'nicetv',
            username: 'devs',
            properties: {
                content_metadata: {
                    title: "Turtles"
                }
            },
            smartswitchConfig: {
                enabled: true
            }
        });
    }
    document.addEventListener('DOMContentLoaded', initPlayer);
    </script>
    <script src="/src/v5/util/inspector/inspector.js"></script>
</body>

</html>
