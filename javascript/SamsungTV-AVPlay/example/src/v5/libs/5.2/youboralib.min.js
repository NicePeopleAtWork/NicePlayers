/**
 * @license
 * youboralib 5.2 <http://youbora.com/>
 * Copyright NicePopleAtWork <http://nicepeopleatwork.com/>
 */
var $YB=$YB||{version:"5.2",plugins:{},adnalyzers:{},utils:{},api:{},comm:{},data:{},services:{}};$YB.api.Ads=function(e){this.adnalyzer=e,this.buffer=new $YB.utils.Buffer(this),this.chrono={total:new $YB.utils.Chrono,joinTime:new $YB.utils.Chrono,pause:new $YB.utils.Chrono,buffer:this.buffer.chrono},this.counter={pre:0,mid:0,post:0,unknown:0},this.totalPrerollTime=0,this.position=""},$YB.api.Ads.prototype.sendAdStart=function(e,t){try{this.adnalyzer.isAdStartSent&&this.sendAdStop(),this.buffer.autostart&&this.buffer.start(),this.adnalyzer.plugin.videoApi.sendSeekEnd(),this.adnalyzer.plugin.videoApi.sendBufferEnd(),this.adnalyzer.plugin.isShowingAds=!0,this.adnalyzer.isAdStartSent=!0,this.chrono.total.start(),this.chrono.joinTime.start(),e=e||{},e.resource="undefined"!=typeof e.resource?e.resource:this.adnalyzer.plugin.infoApi.getAdResource(),e.position="undefined"!=typeof e.position?e.position:this.adnalyzer.plugin.infoApi.getAdPosition(),e.number="undefined"!=typeof e.number?e.number:this.getNumber(e.position,!0),e.campaign="undefined"!=typeof e.campaign?e.campaign:this.adnalyzer.plugin.data.ads.campaign,e.title="undefined"!=typeof e.title?e.title:this.adnalyzer.plugin.infoApi.getAdTitle(),e.adDuration="undefined"!=typeof e.adDuration?e.adDuration:this.adnalyzer.plugin.infoApi.getAdDuration(),e.playhead="undefined"!=typeof e.playhead?e.playhead:this.adnalyzer.plugin.infoApi.getPlayhead(),e.adnalyzerVersion="undefined"!=typeof e.adnalyzerVersion?e.adnalyzerVersion:this.adnalyzer.adnalyzerVersion,e.adPlayerVersion="undefined"!=typeof e.adPlayerVersion?e.adPlayerVersion:this.adnalyzer.plugin.infoApi.getAdPlayerVersion(),"undefined"!=typeof e.durationJointime&&(this.adnalyzer.isAdJoinSent=!0),this.position=e.position,this.adnalyzer.plugin.comm.sendRequest("/adStart",e,t),$YB.notice("Request: NQS /adStart "+e.position+e.number,"darkgreen")}catch(i){$YB.error(i)}},$YB.api.Ads.prototype.sendAdJoin=function(e,t){try{this.adnalyzer.isAdStartSent&&!this.adnalyzer.isAdJoinSent&&(this.adnalyzer.isAdJoinSent=!0,this.buffer.autostart&&this.buffer.start(),e=e||{},e.adPlayhead="undefined"!=typeof e.adPlayhead?e.adPlayhead:this.adnalyzer.plugin.infoApi.getAdPlayhead(),e.duration="undefined"!=typeof e.duration?e.duration:this.chrono.joinTime.getDeltaTime(),e.position="undefined"!=typeof e.position?e.position:this.position,e.number="undefined"!=typeof e.number?e.number:this.getNumber(e.position),this.adnalyzer.plugin.comm.sendRequest("/adJoinTime",e,t),$YB.notice("Request: NQS /adJoinTime "+e.duration+"ms","darkgreen"))}catch(i){$YB.error(i)}},$YB.api.Ads.prototype.sendAdStop=function(e,t){try{this.adnalyzer.isAdStartSent&&(this.adnalyzer.isAdStartSent=!1,this.adnalyzer.isAdJoinSent=!1,this.adnalyzer.isAdBuffering=!1,this.adnalyzer.plugin.isShowingAds=!1,this.buffer.stop(),e=e||{},e.totalDuration="undefined"!=typeof e.totalDuration?e.totalDuration:this.chrono.total.getDeltaTime(),e.adPlayhead="undefined"!=typeof e.adPlayhead?e.adPlayhead:this.adnalyzer.plugin.infoApi.getAdPlayhead(),e.adBitrate="undefined"!=typeof e.adBitrate?e.adBitrate:this.adnalyzer.plugin.infoApi.getAdBitrate(),e.position="undefined"!=typeof e.position?e.position:this.position,e.number="undefined"!=typeof e.number?e.number:this.getNumber(e.position),e.adPlayhead||delete e.adPlayhead,"pre"!=this.position||this.adnalyzer.plugin.isJoinSent||(this.totalPrerollTime+=e.totalDuration),this.adnalyzer.plugin.comm.sendRequest("/adStop",e,t),$YB.notice("Request: NQS /adStop "+e.totalDuration+"ms","darkgreen"))}catch(i){$YB.error(i)}},$YB.api.Ads.prototype.sendAdPause=function(e,t){try{this.adnalyzer.isAdJoinSent&&!this.adnalyzer.isAdPaused&&(this.adnalyzer.isAdPaused=!0,this.chrono.pause.start(),e=e||{},e.position="undefined"!=typeof e.position?e.position:this.position,e.number="undefined"!=typeof e.number?e.number:this.getNumber(e.position),this.adnalyzer.plugin.comm.sendRequest("/adPause",e,t),$YB.notice("Request: NQS /adPause","darkgreen"))}catch(i){$YB.error(i)}},$YB.api.Ads.prototype.sendAdResume=function(e,t){try{this.adnalyzer.isAdJoinSent&&this.adnalyzer.isAdPaused&&(this.adnalyzer.isAdPaused=!1,this.chrono.pause.getDeltaTime(),e=e||{},e.position="undefined"!=typeof e.position?e.position:this.position,e.number="undefined"!=typeof e.number?e.number:this.getNumber(e.position),this.adnalyzer.plugin.comm.sendRequest("/adResume",e,t),$YB.notice("Request: NQS /adResume","darkgreen"))}catch(i){$YB.error(i)}},$YB.api.Ads.prototype.sendAdBufferStart=function(){try{this.adnalyzer.isAdJoinSent&&!this.adnalyzer.isAdBuffering&&(this.adnalyzer.isAdBuffering=!0,this.chrono.buffer.start(),$YB.notice("Method: /adBufferStart","darkgreen"))}catch(e){$YB.error(e)}},$YB.api.Ads.prototype.sendAdBufferEnd=function(e,t){try{this.adnalyzer.isAdJoinSent&&this.adnalyzer.isAdBuffering&&(this.adnalyzer.isAdBuffering=!1,e=e||{},e.adPlayhead="undefined"!=typeof e.adPlayhead?e.adPlayhead:this.adnalyzer.plugin.infoApi.getAdPlayhead(),e.duration="undefined"!=typeof e.duration?e.duration:this.chrono.buffer.getDeltaTime(),e.position="undefined"!=typeof e.position?e.position:this.position,e.number="undefined"!=typeof e.number?e.number:this.getNumber(e.position),this.adnalyzer.plugin.comm.sendRequest("/adBufferUnderrun",e,t),$YB.notice("Request: NQS /adBufferUnderrun "+e.duration+"ms","darkgreen"))}catch(i){$YB.error(i)}},$YB.api.Ads.prototype.getNumber=function(e,t){switch(e){case"pre":return t?++this.counter.pre:this.counter.pre;case"mid":return t?++this.counter.mid:this.counter.mid;case"post":return t?++this.counter.post:this.counter.post;default:return t?++this.counter.unknown:this.counter.unknown}},$YB.api.Ads.prototype.resetNumbers=function(){this.counter={pre:0,mid:0,post:0,unknown:0}},$YB.api.Info=function(e){this.plugin=e,this.lastBitrate=0,this.lastAdBitrate=0},$YB.api.Info.prototype.getResource=function(){try{return this.plugin.resourceParser&&this.plugin.resourceParser.realResource?this.plugin.resourceParser.realResource:"undefined"!=typeof this.plugin.data.media.resource?this.plugin.data.media.resource:this.plugin.getResource()}catch(e){return $YB.warn(e),"unknown"}},$YB.api.Info.prototype.getMediaDuration=function(){try{var e=0;return e="undefined"!=typeof this.plugin.data.media.duration?this.plugin.data.media.duration:this.plugin.getMediaDuration(),Math.round($YB.utils.parseNumber(e,0))}catch(t){return $YB.warn(t),0}},$YB.api.Info.prototype.getIsLive=function(){try{return"undefined"!=typeof this.plugin.data.media.isLive?this.plugin.data.media.isLive:this.plugin.getIsLive()}catch(e){return $YB.warn(e),!1}},$YB.api.Info.prototype.getPlayerVersion=function(){try{return this.plugin.getPlayerVersion()}catch(e){return $YB.warn(e),""}},$YB.api.Info.prototype.getTitle=function(){try{return"undefined"!=typeof this.plugin.data.media.title?this.plugin.data.media.title:this.plugin.getTitle()}catch(e){return $YB.warn(e),""}},$YB.api.Info.prototype.getRendition=function(){try{return"undefined"!=typeof this.plugin.data.media.rendition?this.plugin.data.media.rendition:this.plugin.getRendition()}catch(e){return $YB.warn(e),""}},$YB.api.Info.prototype.getBitrate=function(){try{var e=Math.round(this.plugin.getBitrate());if(-1==e&&this.plugin.tag&&"undefined"!=typeof this.plugin.tag.webkitVideoDecodedByteCount){var t=this.plugin.tag.webkitVideoDecodedByteCount;this.lastBitrate&&(t=Math.round((this.plugin.tag.webkitVideoDecodedByteCount-this.lastBitrate)/5*8)),this.lastBitrate=this.plugin.tag.webkitVideoDecodedByteCount,e=t}return $YB.utils.parseNumber(e,-1)}catch(i){return $YB.warn(i),-1}},$YB.api.Info.prototype.getThroughput=function(){try{return $YB.utils.parseNumber(Math.round(this.plugin.getThroughput()),-1)}catch(e){return $YB.warn(e),-1}},$YB.api.Info.prototype.getTotalBytes=function(){try{return $YB.utils.parseNumber(this.plugin.getTotalBytes(),null)}catch(e){return $YB.warn(e),null}},$YB.api.Info.prototype.getPlayhead=function(){try{var e=this.plugin.getPlayhead();return this.plugin.adnalyzer&&null!==this.plugin.adnalyzer.getMediaPlayhead()&&(e=this.plugin.adnalyzer.getMediaPlayhead()),$YB.utils.parseNumber(e,0)}catch(t){return $YB.warn(t),0}},$YB.api.Info.prototype.getAdPlayhead=function(){try{return $YB.utils.parseNumber(this.plugin.adnalyzer.getAdPlayhead(),0)}catch(e){return $YB.warn(e),0}},$YB.api.Info.prototype.getAdBitrate=function(){try{var e=Math.round(this.plugin.adnalyzer.getAdBitrate());if(-1==e&&this.plugin.adnalyzer.tag&&"undefined"!=typeof this.plugin.adnalyzer.tag.webkitVideoDecodedByteCount){var t=this.plugin.adnalyzer.tag.webkitVideoDecodedByteCount;this.lastAdBitrate&&(t=Math.round((this.plugin.adnalyzer.tag.webkitVideoDecodedByteCount-this.lastAdBitrate)/5*8)),this.lastAdBitrate=this.plugin.adnalyzer.tag.webkitVideoDecodedByteCount,e=t}return $YB.utils.parseNumber(e,-1)}catch(i){return $YB.warn(i),-1}},$YB.api.Info.prototype.getAdResource=function(){try{return"undefined"!=typeof this.plugin.data.ads.resource?this.plugin.data.ads.resource:this.plugin.adnalyzer.getAdResource()}catch(e){return $YB.warn(e),""}},$YB.api.Info.prototype.getAdPosition=function(){try{return"undefined"!=typeof this.plugin.data.ads.position?this.plugin.data.ads.position:this.plugin.adnalyzer.getAdPosition()}catch(e){return $YB.warn(e),"unknown"}},$YB.api.Info.prototype.getAdTitle=function(){try{return"undefined"!=typeof this.plugin.data.ads.title?this.plugin.data.ads.title:this.plugin.adnalyzer.getAdTitle()}catch(e){return $YB.warn(e),""}},$YB.api.Info.prototype.getAdDuration=function(){try{return res=0,"undefined"!=typeof this.plugin.data.ads.duration?res=this.plugin.data.ads.duration:res=Math.round(this.plugin.adnalyzer.getAdDuration()),$YB.utils.parseNumber(res,0)}catch(e){return $YB.warn(e),0}},$YB.api.Info.prototype.getAdPlayerVersion=function(){try{return this.plugin.adnalyzer.getAdPlayerVersion()}catch(e){return $YB.warn(e),null}},$YB.api.Ping=function(e){try{this.plugin=e,this.interval=5e3,this.isRunning=!1,this.timer=null,this.chrono=new $YB.utils.Chrono,this.changedEntities=[],this.lastRendition=""}catch(t){$YB.error(t)}},$YB.api.Ping.prototype.start=function(){try{this.isRunning=!0,this._setPing(),$YB.notice("Sending pings every "+this.interval+"ms.","darkgreen")}catch(e){$YB.error(e)}},$YB.api.Ping.prototype.stop=function(){try{this.isRunning=!1,clearTimeout(this.timer)}catch(e){$YB.error(e)}},$YB.api.Ping.prototype._setPing=function(){try{if(this.isRunning){this.chrono.start();var e=this;this.timer=setTimeout(function(){e.sendPing({diffTime:e.chrono.stop()}),e._setPing()},this.interval)}}catch(t){$YB.error(t)}},$YB.api.Ping.prototype.sendPing=function(e,t){try{e=e||{},e.time="undefined"!=typeof e.time?e.time:this.plugin.infoApi.getPlayhead(),e.bitrate="undefined"!=typeof e.bitrate?e.bitrate:this.plugin.infoApi.getBitrate(),e.throughput="undefined"!=typeof e.throughput?e.throughput:this.plugin.infoApi.getThroughput(),e.totalBytes="undefined"!=typeof e.totalBytes?e.totalBytes:this.plugin.infoApi.getTotalBytes(),e.pingTime="undefined"!=typeof e.pingTime?e.pingTime:this.plugin.comm.pingTime;var i=this.plugin.infoApi.getRendition();if(this.lastRendition!=i&&(this.sendChangeEntity("rendition",i),this.lastRendition=i),1==this.changedEntities.length){var n=this.changedEntities.shift();e.entityType="undefined"!=typeof e.entityType?e.entityType:n.key,e.entityValue="undefined"!=typeof e.entityValue?e.entityValue:n.value}else if(this.changedEntities.length>1){for(var r={};this.changedEntities.length>0;){var n=this.changedEntities.shift();r[n.key]=n.value}e.entityValue="undefined"!=typeof e.entityValue?e.entityValue:JSON.stringify(r)}this.plugin.adnalyzer&&this.plugin.isShowingAds&&(e.adPlayhead="undefined"!=typeof e.adPlayhead?e.adPlayhead:this.plugin.infoApi.getAdPlayhead(),e.adBitrate="undefined"!=typeof e.adBitrate?e.adBitrate:this.plugin.infoApi.getAdBitrate()),this.plugin.comm.sendRequest("/ping",e,t)}catch(s){$YB.error(s)}},$YB.api.Ping.prototype.sendChangeEntity=function(e,t){try{this.changedEntities.push({key:e,value:t})}catch(i){$YB.error(i)}},$YB.api.Video=function(e){this.plugin=e,this.buffer=new $YB.utils.Buffer(this),this.chrono={seek:new $YB.utils.Chrono,pause:new $YB.utils.Chrono,joinTime:new $YB.utils.Chrono,genericAd:new $YB.utils.Chrono,buffer:this.buffer.chrono},this.lastDuration=0},$YB.api.Video.prototype.sendStart=function(e,t){try{this.plugin.isStartSent&&this.sendStop(),(this.plugin.data.parseCDNNodeHost||this.plugin.data.parseHLS)&&this.plugin.resourceParser.init(),this.plugin.isStartSent=!0,this.chrono.joinTime.start(),this.plugin.pingApi.start(),this._consolidateTitle(),e=e||{},e.system="undefined"!=typeof e.system?e.system:this.plugin.data.accountCode,e.player="undefined"!=typeof e.player?e.player:this.plugin.pluginName,e.user="undefined"!=typeof e.user?e.user:this.plugin.data.username,e.transcode="undefined"!=typeof e.transcode?e.transcode:this.plugin.data.transactionCode,e.hashTitle="undefined"!=typeof e.hashTitle?e.hashTitle:this.plugin.data.hashTitle,e.referer="undefined"!=typeof e.referer?e.referer:"undefined"!=typeof window?window.location.href:"",e.deviceId="undefined"!=typeof e.deviceId?e.deviceid:this.plugin.data.device.id,e.pluginVersion="undefined"!=typeof e.pluginVersion?e.pluginVersion:this.plugin.pluginVersion,e.playerVersion="undefined"!=typeof e.playerVersion?e.playerVersion:this.plugin.infoApi.getPlayerVersion(),e.resource="undefined"!=typeof e.resource?e.resource:this.plugin.infoApi.getResource(),e.duration="undefined"!=typeof e.duration?e.duration:this.plugin.infoApi.getMediaDuration(),e.live="undefined"!=typeof e.live?e.live:this.plugin.infoApi.getIsLive(),e.rendition="undefined"!=typeof e.rendition?e.rendition:this.plugin.infoApi.getRendition(),e.title="undefined"!=typeof e.title?e.title:this.plugin.infoApi.getTitle(),e.properties="undefined"!=typeof e.properties?e.properties:this.plugin.data.properties,e.cdn="undefined"!=typeof e.cdn?e.cdn:this.plugin.data.media.cdn,e.isp="undefined"!=typeof e.isp?e.isp:this.plugin.data.network.isp,e.ip="undefined"!=typeof e.ip?e.ip:this.plugin.data.network.ip,e.param1="undefined"!=typeof e.param1?e.param1:this.plugin.data.extraParams.param1,e.param2="undefined"!=typeof e.param2?e.param2:this.plugin.data.extraParams.param2,e.param3="undefined"!=typeof e.param3?e.param3:this.plugin.data.extraParams.param3,e.param4="undefined"!=typeof e.param4?e.param4:this.plugin.data.extraParams.param4,e.param5="undefined"!=typeof e.param5?e.param5:this.plugin.data.extraParams.param5,e.param6="undefined"!=typeof e.param6?e.param6:this.plugin.data.extraParams.param6,e.param7="undefined"!=typeof e.param7?e.param7:this.plugin.data.extraParams.param7,e.param8="undefined"!=typeof e.param8?e.param8:this.plugin.data.extraParams.param8,e.param9="undefined"!=typeof e.param9?e.param9:this.plugin.data.extraParams.param9,e.param10="undefined"!=typeof e.param10?e.param10:this.plugin.data.extraParams.param10,e.totalBytes="undefined"!=typeof e.totalBytes?e.totalBytes:this.plugin.infoApi.getTotalBytes(),e.pingTime="undefined"!=typeof e.pingTime?e.pingTime:this.plugin.comm.pingTime,e.adsExpected="undefined"!=typeof e.adsExpected?e.adsExpected:this.plugin.data.ads.expected,this.plugin.data.parseCDNNodeHost&&(e.nodeHost="undefined"!=typeof e.nodeHost?e.nodeHost:this.plugin.resourceParser.cdnHost,e.nodeType="undefined"!=typeof e.nodeType?e.nodeType:this.plugin.resourceParser.cdnType),this.plugin.resumeService&&this.plugin.data.resumeConfig.enabled&&(this.plugin.resumeService.start(),e.isResumed=this.plugin.resumeService.isResumed),1==this.plugin.data.isBalanced&&(e.isBalanced=1),1==this.plugin.data.isResumed&&(e.isResumed=1),this.plugin.comm.nextView(e.live),this.plugin.comm.sendRequest("/start",e,t),$YB.notice("Request: NQS /start "+e.resource,"darkgreen"),this.lastDuration=e.duration}catch(i){$YB.error(i)}},$YB.api.Video.prototype._consolidateTitle=function(){try{this.plugin.data.properties.content_metadata?this.plugin.data.properties.content_metadata.title=this.plugin.infoApi.getTitle():this.plugin.data.properties.content_metadata={title:this.plugin.infoApi.getTitle()}}catch(e){$YB.error(e)}},$YB.api.Video.prototype.sendJoin=function(e,t){try{!this.plugin.isStartSent||this.plugin.isJoinSent||this.plugin.adnalyzer&&this.plugin.adnalyzer.isAdStartSent||(this.plugin.isJoinSent=!0,this.buffer.autostart&&this.buffer.start(),e=e||{},e.time="undefined"!=typeof e.time?e.time:this.chrono.joinTime.getDeltaTime(),e.eventTime="undefined"!=typeof e.eventTime?e.eventTime:this.plugin.infoApi.getPlayhead(),e.mediaDuration="undefined"!=typeof e.mediaDuration?e.mediaDuration:this.plugin.infoApi.getMediaDuration(),e.mediaDuration===this.lastDuration&&delete e.mediaDuration,this.plugin.adnalyzer&&this.plugin.adnalyzer.adsApi.totalPrerollTime>0&&(e.time=e.time-this.plugin.adnalyzer.adsApi.totalPrerollTime,e.time<0&&(e.time=1),this.plugin.adnalyzer.adsApi.totalPrerollTime=0),this.plugin.comm.sendRequest("/joinTime",e,t),$YB.notice("Request: NQS /joinTime "+e.time+"ms","darkgreen"))}catch(i){$YB.error(i)}},$YB.api.Video.prototype.sendStop=function(e,t){try{this.plugin.isStartSent&&(this.plugin.isStartSent=!1,this.plugin.isPaused=!1,this.plugin.isJoinSent=!1,this.plugin.isSeeking=!1,this.plugin.isBuffering=!1,this.plugin.resourceParser.clear(),this.plugin.pingApi.stop(),this.buffer.stop(),this.plugin.adnalyzer&&this.plugin.adnalyzer.adsApi.resetNumbers(),e=e||{},e.diffTime="undefined"!=typeof e.diffTime?e.diffTime:this.plugin.pingApi.chrono.getDeltaTime(),this.plugin.comm.sendRequest("/stop",e,t),$YB.notice("Request: NQS /stop","darkgreen"),$YB.services.Resume&&this.plugin.data.resumeConfig.enabled&&this.plugin.resumeService.sendPlayTime())}catch(i){$YB.error(i)}},$YB.api.Video.prototype.sendPause=function(e,t){try{this.plugin.isJoinSent&&!this.plugin.isPaused&&(this.plugin.isPaused=!0,this.chrono.pause.start(),this.plugin.comm.sendRequest("/pause",e,t),$YB.notice("Request: NQS /pause","darkgreen"),$YB.services.Resume&&this.plugin.data.resumeConfig.enabled&&this.plugin.resumeService.sendPlayTime())}catch(i){$YB.error(i)}},$YB.api.Video.prototype.sendResume=function(e,t){try{this.plugin.isJoinSent&&this.plugin.isPaused&&(this.plugin.isPaused=!1,this.chrono.pause.getDeltaTime(),this.plugin.comm.sendRequest("/resume",e,t),$YB.notice("Request: NQS /resume","darkgreen"))}catch(i){$YB.error(i)}},$YB.api.Video.prototype.sendBufferStart=function(){try{this.plugin.isJoinSent&&!this.plugin.isBuffering&&(this.plugin.isBuffering=!0,this.chrono.buffer.start(),$YB.notice("Method: /bufferStart","darkgreen"))}catch(e){$YB.error(e)}},$YB.api.Video.prototype.sendBufferEnd=function(e,t){try{this.plugin.isJoinSent&&this.plugin.isBuffering&&(this.plugin.isBuffering=!1,e=e||{},e.duration="undefined"!=typeof e.duration?e.duration:this.chrono.buffer.getDeltaTime(),e.time="undefined"!=typeof e.time?e.time:this.plugin.infoApi.getPlayhead(),this.plugin.infoApi.getIsLive()&&0===e.time&&(e.time=1),this.plugin.comm.sendRequest("/bufferUnderrun",e,t),$YB.notice("Request: NQS /bufferUnderrun "+e.duration+"ms","darkgreen"))}catch(i){$YB.error(i)}},$YB.api.Video.prototype.sendError=function(e,t){try{this._consolidateTitle(),this.plugin.pingApi.stop(),this.buffer.stop(),e=e||{},e.msg="undefined"!=typeof e.msg?e.msg:"Unknown Error",("undefined"==typeof e.errorCode||parseInt(e.errorCode)<0)&&(e.errorCode=9e3),e.system="undefined"!=typeof e.system?e.system:this.plugin.data.accountCode,e.player="undefined"!=typeof e.player?e.player:this.plugin.pluginName,e.hashTitle="undefined"!=typeof e.hashTitle?e.hashTitle:this.plugin.data.hashTitle,e.user="undefined"!=typeof e.user?e.user:this.plugin.data.username,e.transcode="undefined"!=typeof e.transcode?e.transcode:this.plugin.data.transactionCode,e.referer="undefined"!=typeof e.referer?e.referer:"undefined"!=typeof window?window.location.href:"",e.deviceId="undefined"!=typeof e.deviceId?e.deviceid:this.plugin.data.device.id,e.pluginVersion="undefined"!=typeof e.pluginVersion?e.pluginVersion:this.plugin.pluginVersion,e.playerVersion="undefined"!=typeof e.playerVersion?e.playerVersion:this.plugin.infoApi.getPlayerVersion(),e.resource="undefined"!=typeof e.resource?e.resource:this.plugin.infoApi.getResource(),e.duration="undefined"!=typeof e.duration?e.duration:this.plugin.infoApi.getMediaDuration(),e.live="undefined"!=typeof e.live?e.live:this.plugin.infoApi.getIsLive(),e.rendition="undefined"!=typeof e.rendition?e.rendition:this.plugin.infoApi.getRendition(),e.title="undefined"!=typeof e.title?e.title:this.plugin.infoApi.getTitle(),e.properties="undefined"!=typeof e.properties?e.properties:this.plugin.data.properties,e.cdn="undefined"!=typeof e.cdn?e.cdn:this.plugin.data.media.cdn,e.isp="undefined"!=typeof e.isp?e.isp:this.plugin.data.network.isp,e.ip="undefined"!=typeof e.ip?e.ip:this.plugin.data.network.ip,e.param1="undefined"!=typeof e.param1?e.param1:this.plugin.data.extraParams.param1,e.param2="undefined"!=typeof e.param2?e.param2:this.plugin.data.extraParams.param2,e.param3="undefined"!=typeof e.param3?e.param3:this.plugin.data.extraParams.param3,e.param4="undefined"!=typeof e.param4?e.param4:this.plugin.data.extraParams.param4,e.param5="undefined"!=typeof e.param5?e.param5:this.plugin.data.extraParams.param5,e.param6="undefined"!=typeof e.param6?e.param6:this.plugin.data.extraParams.param6,e.param7="undefined"!=typeof e.param7?e.param7:this.plugin.data.extraParams.param7,e.param8="undefined"!=typeof e.param8?e.param8:this.plugin.data.extraParams.param8,e.param9="undefined"!=typeof e.param9?e.param9:this.plugin.data.extraParams.param9,e.param10="undefined"!=typeof e.param10?e.param10:this.plugin.data.extraParams.param10,this.plugin.data.parseCDNNodeHost&&(e.nodeHost="undefined"!=typeof e.nodeHost?e.nodeHost:this.plugin.resourceParser.cdnHost,e.nodeType="undefined"!=typeof e.nodeType?e.nodeType:this.plugin.resourceParser.cdnType),$YB.services.Resume&&this.plugin.data.resumeConfig.enabled&&(this.plugin.resumeService.start(),e.isResumed=this.plugin.resumeService.isResumed),1==this.plugin.data.isBalanced&&(e.isBalanced=1),1==this.plugin.data.isResumed&&(e.isResumed=1),this.plugin.comm.sendRequest("/error",e,t),$YB.notice("Request: NQS /error "+e.msg,"darkgreen")}catch(i){$YB.error(i)}},$YB.api.Video.prototype.sendSeekStart=function(){try{this.plugin.isJoinSent&&!this.plugin.isSeeking&&(this.plugin.isSeeking=!0,this.chrono.seek.start(),$YB.notice("Method: /seekStart","darkgreen"))}catch(e){$YB.error(e)}},$YB.api.Video.prototype.sendSeekEnd=function(e,t){try{this.plugin.isJoinSent&&this.plugin.isSeeking&&(this.plugin.isSeeking=!1,e=e||{},e.duration="undefined"!=typeof e.duration?e.duration:this.chrono.seek.getDeltaTime(),e.time="undefined"!=typeof e.time?e.time:this.plugin.infoApi.getPlayhead(),this.plugin.comm.sendRequest("/seek",e,t),$YB.notice("Request: NQS /seek "+e.duration+"ms","darkgreen"))}catch(i){$YB.error(i)}},$YB.api.Video.prototype.sendGenericAdStart=function(){try{this.plugin.adnalyzer?$YB.warn("Generic Ads are disabled if an adnalyzer module is loaded."):this.plugin.isStartSent&&!this.plugin.isShowingAds&&(this.plugin.isShowingAds=!0,this.chrono.genericAd.start(),this.sendBufferEnd(),this.sendSeekEnd(),$YB.notice("Method: /genericAdStart","darkgreen"))}catch(e){$YB.error(e)}},$YB.api.Video.prototype.sendGenericAdEnd=function(){try{this.plugin.adnalyzer?$YB.warn("Generic Ads are disabled if an adnalyzer module is loaded."):this.plugin.isStartSent&&this.plugin.isShowingAds&&(this.plugin.isShowingAds=!1,this.chrono.genericAd.stop(),this.plugin.isJoinSent||(this.chrono.joinTime.startTime+=this.chrono.genericAd.getDeltaTime(),this.chrono.joinTime.startTime=Math.min(this.chrono.joinTime.startTime,(new Date).getTime())),$YB.notice("Method: /genericAdEnd "+this.chrono.genericAd.getDeltaTime()+"ms","darkgreen"))}catch(e){$YB.error(e)}},$YB.comm.AjaxRequest=function(e,t,i,n){try{this.xhr=this.createXHR(),this.host=e,this.service=t||"",this.params=i,this.options=n||{},this.options.method=this.options.method||$YB.comm.AjaxRequest.options.method,this.options.maxRetries=this.options.maxRetries||$YB.comm.AjaxRequest.options.maxRetries,"undefined"==typeof this.options.retryAfter&&(this.options.retryAfter=$YB.comm.AjaxRequest.options.retryAfter),this.hasError=!1,this.retries=0}catch(r){$YB.error(r)}},$YB.comm.AjaxRequest.options={method:"GET",requestHeaders:{},maxRetries:3,retryAfter:5e3},$YB.comm.AjaxRequest.prototype.getUrl=function(){try{return this.host+this.service+this.getParams()}catch(e){$YB.error(e)}},$YB.comm.AjaxRequest.prototype.getParams=function(){try{switch(typeof this.params){case"object":return"?"+this._parseParams(this.params);case"string":return this.params?"?"+this.params:"";default:return""}}catch(e){$YB.error(e)}},$YB.comm.AjaxRequest.prototype.setParam=function(e,t){try{switch(typeof this.params){case"string":this.params.length>0&&(this.params+="&"),this.params+=e+"="+t;break;case"object":default:this.params[e]=t}return this}catch(i){return $YB.error(i),this}},$YB.comm.AjaxRequest.prototype.on=function(e,t){try{"error"==e&&(this.hasError=!0),"function"==typeof t?this.xhr.addEventListener(e,t,!1):"undefined"!=typeof t&&$YB.warn("Warning: Request '"+this.getUrl()+"' has a callback that is not a function.")}catch(i){$YB.error(i)}finally{return this}},$YB.comm.AjaxRequest.prototype.load=function(e){return this.on("load",e)},$YB.comm.AjaxRequest.prototype.error=function(e){return this.on("error",e)},$YB.comm.AjaxRequest.prototype.send=function(){try{if(this.xhr.open(this.options.method,this.getUrl(),!0),this.options.requestHeaders)for(var e in this.options.requestHeaders)this.options.requestHeaders.hasOwnProperty(e)&&this.xhr.setRequestHeader(e,this.options.requestHeaders[e]);if(!this.hasError&&this.options.retryAfter>0&&this.options.maxRetries>0){var t=this;this.error(function n(){t.retries++,t.retries>t.options.maxRetries?$YB.error("Error: Aborting failed request. Max retries reached."):($YB.warn("Error: Request failed. Retry "+t.retries+" of "+t.options.maxRetries+" in "+t.options.retryAfter+"ms."),setTimeout(function(){t.xhr.removeEventListener("error",n),t.send()},t.options.retryAfter))})}$YB.debugLevel>=5&&$YB.requestLog("XHR Req: "+this.getUrl(),"navy"),this.xhr.send()}catch(i){$YB.error(i)}},$YB.comm.AjaxRequest.prototype.createXHR=function(){try{return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}catch(e){return $YB.error(e),{}}},$YB.comm.AjaxRequest.prototype.getXHR=function(){return this.xhr},$YB.comm.AjaxRequest.prototype._parseParams=function(e){try{if("string"==typeof e)return e;if(null!==e&&"object"==typeof e){var t="";for(var i in e)null!==e[i]&&"object"==typeof e[i]?t+=encodeURIComponent(i)+"="+encodeURIComponent(JSON.stringify(e[i]))+"&":null!==e[i]&&"undefined"!=typeof e[i]&&""!==e[i]&&(t+=encodeURIComponent(i)+"="+encodeURIComponent(e[i])+"&");return t.slice(0,-1)}return""}catch(n){return $YB.error(n),""}},$YB.comm.Communication=function(e){try{this.plugin=e,this.host=e.data.service,this.pingTime=5,this.prefix="U",this.code="",this.view=-1,this.preloaders=[],this._requests={},this.addPreloader("FastData")}catch(t){$YB.error(t)}},$YB.comm.Communication.prototype.getViewCode=function(){return this.code?this.prefix+this.code+"_"+this.view:"nocode"},$YB.comm.Communication.prototype.nextView=function(e){return this.view++,e===!0?this.prefix="L":e===!1?this.prefix="V":this.prefix="U",this.getViewCode()},$YB.comm.Communication.prototype.requestData=function(e,t){try{e=e||{},e.outputformat="jsonp",delete e.code;var i=this,n=new $YB.comm.AjaxRequest(this._parseServiceHost(this.host),"/data",e);n.load(function(){i.receiveData(n)}),n.load(t),n.send(),$YB.notice("Request: NQS /data "+e.system,"darkgreen")}catch(r){$YB.error(r)}},$YB.comm.Communication.prototype.receiveData=function(e){try{var t=e.getXHR().response,i=JSON.parse(t.slice(t.indexOf("(")+1,t.lastIndexOf(")"))),n=i.q.h,r=i.q.c,s=i.q.pt,o=i.q.b;n.length>0&&r.length>0&&s.length>0&&o.length>0?(this.prefix=r.slice(0,1),this.code=r.slice(1),this.host=n,this.pingTime=s,this.plugin.pingApi.interval=1e3*this.pingTime,this.balancerEnabled=o,$YB.notice("FastData '"+r+"' is ready.","darkgreen"),this._requests.nocode&&this._requests.nocode.length>0&&(this._requests[this.getViewCode()]=this._requests.nocode,delete this._requests.nocode),this.removePreloader("FastData")):$YB.error("Error: FastData response is wrong.")}catch(a){$YB.error(a)}},$YB.comm.Communication.prototype.sendRequest=function(e,t,i){try{if(this.isAllowed(e)){t=t||{},delete t.code;var n=new $YB.comm.AjaxRequest("",e,t);n.load(i),this._registerRequest(n)}}catch(r){$YB.error(r)}},$YB.comm.Communication.prototype.sendService=function(e,t,i){try{var n=new $YB.comm.AjaxRequest(this._parseServiceHost(e),"",t);n.load(i),this._registerRequest(n)}catch(r){$YB.error(r)}},$YB.comm.Communication.prototype.isAllowed=function(e){return this.plugin.data.enableAnalytics&&!(e in this.plugin.data.disabledRequests)},$YB.comm.Communication.prototype.addPreloader=function(e){try{this.preloaders.push(e)}catch(t){$YB.error(t)}},$YB.comm.Communication.prototype.removePreloader=function(e){try{var t=this.preloaders.indexOf(e);if(-1!==t){if(this.preloaders.splice(t,1),0===this.preloaders.length){var i;for(var n in this._requests)for(;i=this._requests[n].shift();)i.setParam("code",n),i.host||(i.host=this._parseServiceHost(this.host)),"undefined"!=typeof i.params.resource&&this.plugin.resourceParser.realResource&&(i.params.resource=this.plugin.resourceParser.realResource),"undefined"!=typeof i.params.nodeHost&&this.plugin.resourceParser.nodeHost&&(i.params.nodeHost=this.plugin.resourceParser.nodeHost,i.params.nodeType=this.plugin.resourceParser.nodeType),i.send()}}else $YB.warn("Warning: trying to remove unexisting preloader '"+e+"'.")}catch(r){$YB.error(r)}},$YB.comm.Communication.prototype._registerRequest=function(e){try{return"undefined"==typeof this._requests[this.getViewCode()]&&(this._requests[this.getViewCode()]=[]),e.setParam("timemark",(new Date).getTime()),this._requests[this.getViewCode()].push(e),this._sendRequests(),e}catch(t){$YB.error(t)}},$YB.comm.Communication.prototype._sendRequests=function(){try{if(0===this.preloaders.length){var e;for(var t in this._requests)for(;e=this._requests[t].shift();)e.setParam("code",t),e.host||(e.host=this._parseServiceHost(this.host)),e.send()}}catch(i){$YB.error(i)}},$YB.comm.Communication.prototype._parseServiceHost=function(e){try{return 0===e.indexOf("//")?e=e.slice(2):0===e.indexOf("http://")?e=e.slice(7):0===e.indexOf("https://")&&(e=e.slice(8)),e=this.plugin.data.httpSecure===!0?"https://"+e:0===window.location.protocol.indexOf("http")?"//"+e:"http://"+e}catch(t){return $YB.error(t),"http://localhost"}},$YB.data.Options=function(e){try{this.setOptions(e)}catch(t){$YB.error(t)}},$YB.data.Options.prototype={enableAnalytics:!0,disabledRequests:[],parseHLS:!1,parseCDNNodeHost:!1,hashTitle:!0,httpSecure:void 0,enableNiceBuffer:!0,accountCode:"nicetest",service:"nqs.nice264.com",username:void 0,transactionCode:void 0,isBalanced:0,isResumed:0,network:{ip:void 0,isp:void 0},device:{id:void 0},media:{isLive:void 0,resource:void 0,title:void 0,duration:void 0,cdn:void 0},ads:{expected:!1,resource:void 0,campaign:void 0,title:void 0,position:void 0,duration:void 0},properties:{contentId:void 0,type:void 0,transaction_type:void 0,genre:void 0,language:void 0,year:void 0,cast:void 0,director:void 0,owner:void 0,parental:void 0,price:void 0,rating:void 0,audioType:void 0,audioChannels:void 0,device:void 0,quality:void 0},extraParams:{param1:void 0,param2:void 0,param3:void 0,param4:void 0,param5:void 0,param6:void 0,param7:void 0,param8:void 0,param9:void 0,param10:void 0},setOptions:function(e,t){try{if(t=t||this,"undefined"!=typeof e)for(var i in e)"object"==typeof t[i]&&null!==t[i]?this.setOptions(e[i],t[i]):t[i]=e[i]}catch(n){$YB.error(n)}}},$YB.adnalyzers.Generic=function(){},$YB.adnalyzers.Generic.prototype={adnalyzerVersion:"1.0.0-GENERIC",ads:void 0,plugin:void 0,adsApi:void 0,isAdStartSent:!1,isAdJoinSent:!1,isAdPaused:!1,isAdBuffering:!1},$YB.adnalyzers.Generic.prototype.init=function(e,t){
try{return $YB.notice("Adnalyzer "+this.adnalyzerVersion+" is ready."),this.plugin=e,this.ads=t,this.adsApi=new $YB.api.Ads(this),this.ads}catch(i){return $YB.error(i),null}},$YB.adnalyzers.Generic.prototype.startAutobuffer=function(){this.plugin.data.enableNiceBuffer&&(this.adsApi.buffer.autostart=!0)},$YB.adnalyzers.Generic.prototype.playAdHandler=function(e){try{this.isAdStartSent||(this.plugin.setOptions(e),this.adsApi.sendAdStart())}catch(t){$YB.error(t)}},$YB.adnalyzers.Generic.prototype.startJoinAdHandler=function(e){try{this.isAdStartSent||(this.plugin.setOptions(e),this.adsApi.sendAdStart(),this.plugin.isBuffering&&(this.adsApi.chrono.joinTime.startTime=this.plugin.videoApi.chrono.buffer.startTime,this.plugin.isBuffering=!1),this.adsApi.sendAdJoin())}catch(t){$YB.error(t)}},$YB.adnalyzers.Generic.prototype.joinAdHandler=function(){try{this.adsApi.sendAdJoin()}catch(e){$YB.error(e)}},$YB.adnalyzers.Generic.prototype.pauseAdHandler=function(){try{this.adsApi.sendAdPause()}catch(e){$YB.error(e)}},$YB.adnalyzers.Generic.prototype.pauseToggleAdHandler=function(){try{this.isAdPaused?this.adsApi.sendAdResume():this.adsApi.sendAdPause()}catch(e){$YB.error(e)}},$YB.adnalyzers.Generic.prototype.resumeAdHandler=function(){try{this.adsApi.sendAdResume()}catch(e){$YB.error(e)}},$YB.adnalyzers.Generic.prototype.endedAdHandler=function(){try{this.adsApi.sendAdStop()}catch(e){$YB.error(e)}},$YB.adnalyzers.Generic.prototype.skipAdHandler=function(){try{this.adsApi.sendAdStop({skipped:!0})}catch(e){$YB.error(e)}},$YB.adnalyzers.Generic.prototype.bufferingAdHandler=function(){try{this.adsApi.sendAdBufferStart()}catch(e){$YB.error(e)}},$YB.adnalyzers.Generic.prototype.bufferedAdHandler=function(){try{this.isAdStartSent&&(this.isAdJoinSent?this.isAdBuffering&&this.adsApi.sendAdBufferEnd():this.adsApi.sendAdJoin())}catch(e){$YB.error(e)}},$YB.adnalyzers.Generic.prototype.getAdResource=function(){return"unknown"},$YB.adnalyzers.Generic.prototype.getMediaPlayhead=function(){return null},$YB.adnalyzers.Generic.prototype.getAdPlayhead=function(){return 0},$YB.adnalyzers.Generic.prototype.getAdPosition=function(){return"unknown"},$YB.adnalyzers.Generic.prototype.getAdTitle=function(){return null},$YB.adnalyzers.Generic.prototype.getAdDuration=function(){return 0},$YB.adnalyzers.Generic.prototype.getAdBitrate=function(){return-1},$YB.adnalyzers.Generic.prototype.getAdPlayerVersion=function(){return null},$YB.plugins.Generic=function(){},$YB.plugins.Generic.prototype={pluginName:"GENERIC",pluginVersion:"5.1.0-GENERIC",playerId:"generic",player:void 0,tag:void 0,isStartSent:!1,isJoinSent:!1,isPaused:!1,isSeeking:!1,isBuffering:!1,isShowingAds:!1,data:void 0,infoApi:void 0,videoApi:void 0,pingApi:void 0,comm:void 0,adnalyzer:void 0,resourceParser:void 0,concurrencyService:void 0,resumeService:void 0,smartswitchService:void 0},$YB.plugins.Generic.prototype.init=function(e,t){try{return $YB.notice("Plugin "+this.pluginVersion+" (with YouboraJS "+$YB.version+") is ready."),"string"==typeof e?(this.playerId=e,this.player=document.getElementById(e)):(this.player=e,e&&e.id&&(this.playerId=e.id)),this.tag=this.player,this.data=new $YB.data.Options(t),this.infoApi=new $YB.api.Info(this),this.videoApi=new $YB.api.Video(this),this.pingApi=new $YB.api.Ping(this),this.comm=new $YB.comm.Communication(this),this.resourceParser=new $YB.services.ResourceParser(this),this.data.concurrencyConfig.enabled&&($YB.services.Concurrency?this.concurrency=new $YB.services.Concurrency(this):$YB.warning("Concurrecy Service is enabled but library was not found. Try to include 'services.js'.")),this.data.resumeConfig.enabled&&($YB.services.Resume?this.resume=new $YB.services.Resume(this):$YB.warning("Resume Service is enabled but library was not found. Try to include 'services.js'.")),this.data.smartswitchConfig.enabled&&($YB.services.Smartswitch?this.smartswitch=new $YB.services.Smartswitch(this):$YB.warning("Smartswitch Service is enabled but library was not found. Try to include 'services.js'.")),this.comm.requestData({system:this.data.accountCode,pluginVersion:this.pluginVersion,targetDevice:this.pluginName,live:this.data.media.isLive}),this.player}catch(i){return $YB.error(i),null}},$YB.plugins.Generic.prototype.startAutobuffer=function(){this.data.enableNiceBuffer&&(this.videoApi.buffer.autostart=!0)},$YB.plugins.Generic.prototype.playHandler=function(e){try{this.isStartSent||(this.setOptions(e),this.videoApi.sendStart())}catch(t){$YB.error(t)}},$YB.plugins.Generic.prototype.videoChangeHandler=function(e){try{this.setOptions(e),this.videoApi.sendStart()}catch(t){$YB.error(t)}},$YB.plugins.Generic.prototype.joinHandler=function(){try{this.videoApi.sendJoin()}catch(e){$YB.error(e)}},$YB.plugins.Generic.prototype.playingHandler=function(){try{this.isStartSent&&(this.isJoinSent?this.isSeeking&&this.isPaused?(this.videoApi.sendSeekEnd(),this.videoApi.sendResume()):this.isSeeking?this.videoApi.sendSeekEnd():this.isBuffering?this.videoApi.sendBufferEnd():this.isPaused&&this.videoApi.sendResume():this.videoApi.sendJoin())}catch(e){$YB.error(e)}},$YB.plugins.Generic.prototype.pauseHandler=function(){try{this.videoApi.sendPause()}catch(e){$YB.error(e)}},$YB.plugins.Generic.prototype.pauseToggleHandler=function(){try{this.isPaused?this.videoApi.sendResume():this.videoApi.sendPause()}catch(e){$YB.error(e)}},$YB.plugins.Generic.prototype.resumeHandler=function(){try{this.videoApi.sendResume()}catch(e){$YB.error(e)}},$YB.plugins.Generic.prototype.endedHandler=function(){try{this.videoApi.sendStop()}catch(e){$YB.error(e)}},$YB.plugins.Generic.prototype.stopHandler=function(){try{this.videoApi.sendStop()}catch(e){$YB.error(e)}},$YB.plugins.Generic.prototype.errorHandler=function(e,t){try{"undefined"==typeof e&&(e=0),t=t||e||"Unknown error",this.videoApi.sendError({errorCode:e,msg:t})}catch(i){$YB.error(i)}},$YB.plugins.Generic.prototype.seekingHandler=function(){try{this.isBuffering?(this.videoApi.chrono.seek.startTime=this.videoApi.chrono.buffer.startTime,this.videoApi.chrono.seek.lastTime=0,this.videoApi.chrono.buffer.stop(),this.isBuffering=!1,this.isSeeking=!0):this.videoApi.sendSeekStart()}catch(e){$YB.error(e)}},$YB.plugins.Generic.prototype.seekedHandler=function(){try{this.videoApi.sendSeekEnd()}catch(e){$YB.error(e)}},$YB.plugins.Generic.prototype.bufferingHandler=function(){try{this.isSeeking||this.videoApi.sendBufferStart()}catch(e){$YB.error(e)}},$YB.plugins.Generic.prototype.bufferedHandler=function(){try{this.isStartSent&&(this.isJoinSent?this.isSeeking?this.videoApi.sendSeekEnd():this.isBuffering&&this.videoApi.sendBufferEnd():this.videoApi.sendJoin())}catch(e){$YB.error(e)}},$YB.plugins.Generic.prototype.genericAdStartHandler=function(){try{this.videoApi.sendGenericAdStart()}catch(e){$YB.error(e)}},$YB.plugins.Generic.prototype.genericAdEndHandler=function(){try{this.videoApi.sendGenericAdEnd()}catch(e){$YB.error(e)}},$YB.plugins.Generic.prototype.setOptions=function(e){try{this.data.setOptions(e)}catch(t){$YB.error(t)}},$YB.plugins.Generic.prototype.getOptions=function(){try{return this.data||{}}catch(e){return $YB.error(e),{}}},$YB.plugins.Generic.prototype.getResource=function(){return"unknown"},$YB.plugins.Generic.prototype.getPlayhead=function(){return 0},$YB.plugins.Generic.prototype.getMediaDuration=function(){return 0},$YB.plugins.Generic.prototype.getIsLive=function(){return!1},$YB.plugins.Generic.prototype.getRendition=function(){return null},$YB.plugins.Generic.prototype.getBitrate=function(){return-1},$YB.plugins.Generic.prototype.getThroughput=function(){return-1},$YB.plugins.Generic.prototype.getPlayerVersion=function(){return null},$YB.plugins.Generic.prototype.getTotalBytes=function(){return null},$YB.plugins.Generic.prototype.getTitle=function(){return null},$YB.services.ResourceParser=function(e){try{this.plugin=e,this.parseTimeout=null,this.realResource="",this.nodeHost=void 0,this.nodeType=void 0,this.cdnRequests={},this.cdns=$YB.services.ResourceParser.cdnsEnabled.slice()}catch(t){$YB.error(t)}},$YB.services.ResourceParser.prototype.init=function(){try{this.realResource&&this.clear(),this.plugin.comm.addPreloader("services.ResourceParser");var e=this;this.parseTimeout=setTimeout(function(){"services.ResourceParser"in e.plugin.comm.preloaders&&(e.realResource=e.plugin.infoApi.getResource(),e.plugin.comm.removePreloader("services.ResourceParser"),$YB.warn("ResourceParser has exceded the maximum execution time (3s) and will be aborted."))},3e3),this.realResource=this.plugin.infoApi.getResource(),this.plugin.data.parseHLS?this._parseRealResourceAsync(this.realResource):this._parseCDNAsync()}catch(t){$YB.error(t)}},$YB.services.ResourceParser.prototype.clear=function(){this.realResource="",this.nodeHost=void 0,this.nodeType=void 0,this.cdnRequests={},this.cdns=$YB.services.ResourceParser.cdnsEnabled.slice()},$YB.services.ResourceParser.prototype._parseRealResourceAsync=function(e,t){try{var i=/(\S*?(\.m3u8|\.m3u|\.ts|\.mp4)(\?\S*|\n|\r|$))/i.exec(e);if(null!==i){var n=i[1].trim();if(0!==n.indexOf("http")&&(n=t.slice(0,t.lastIndexOf("/"))+"/"+n),".m3u8"==i[2]||".m3u"==i[2]){var r=this;new $YB.comm.AjaxRequest(n).load(function(){r._parseRealResourceAsync(this.responseText,n)}).error(function(){r._parseCDNAsync()}).send()}else this.realResource=n,this._parseCDNAsync()}else this._parseCDNAsync()}catch(s){$YB.error(s),this._parseCDNAsync()}},$YB.services.ResourceParser.cdnsEnabled=["Level3","Akamai","Highwinds","Fastly"],$YB.services.ResourceParser.cdnsAvailable={Level3:{parsers:[{type:"host+type",name:"X-WR-DIAG",regex:/Host:(.+)\sType:(.+)/}],headers:{"X-WR-DIAG":"host"}},Akamai:{parsers:[{type:"host+type",name:"X-Cache",regex:/(.+)\sfrom\s.+\(.+\/(.+)\).+/}]},Highwinds:{parsers:[{type:"host+type",name:"X-HW",regex:/.+,[0-9]+\.(.+)\.(.+)/}]},Fastly:{parsers:[{type:"host",name:"X-Served-By",regex:/([^,\s]+)$/},{type:"type",name:"X-Cache",regex:/([^,\s]+)$/}]}},$YB.services.ResourceParser.prototype._parseCDNAsync=function(){try{if(this.plugin.data.parseCDNNodeHost)if(this.cdns.length>0&&!this.nodeHost){var e=this.cdns.shift();if("undefined"!=typeof $YB.services.ResourceParser.cdnsAvailable[e]){var t=$YB.services.ResourceParser.cdnsAvailable[e],i=JSON.stringify(t.headers);if(this.cdnRequests.hasOwnProperty(i))this._parseNode(t.parsers,this.cdnRequests[i]);else{var n=this,r=new $YB.comm.AjaxRequest(this.realResource,"","",{method:"HEAD",maxRetries:0,requestHeaders:t.headers});r.load(function(){n.cdnRequests[i]=r.getXHR(),n._parseNode(t.parsers,r.getXHR())}),r.error(function(){n._parseCDNAsync()}),r.send()}}else this._parseCDNAsync()}else this.plugin.comm.removePreloader("services.ResourceParser");else this.plugin.comm.removePreloader("services.ResourceParser")}catch(s){$YB.error(s)}},$YB.services.ResourceParser.prototype._parseNode=function(e,t){try{for(var i in e){var n=t.getResponseHeader(e[i].name);if(null===n)return void this._parseCDNAsync();var r=e[i].regex.exec(n);if(null===r)return void this._parseCDNAsync();switch(e[i].type){case"host":this.nodeHost=r[1];break;case"type":this.nodeType=this._parseNodeType(r[1]);break;case"host+type":this.nodeHost=r[1],this.nodeType=this._parseNodeType(r[2]);break;case"type+host":this.nodeType=this._parseNodeType(r[1]),this.nodeHost=r[2]}}this._parseCDNAsync()}catch(s){$YB.error(s),this._parseCDNAsync()}},$YB.services.ResourceParser.prototype._parseNodeType=function(e){try{switch(e){case"TCP_HIT":case"HIT":case"c":return 1;case"TCP_MISS":case"MISS":case"p":return 2;case"TCP_MEM_HIT":return 3;case"TCP_IMS_HIT":return 4;default:return 0}}catch(t){return $YB.error(t),0}},$YB.utils.Buffer=function(e,t){try{this.api=e,e instanceof $YB.api.Video?this.isAd=!1:e instanceof $YB.api.Ads&&(this.isAd=!0),this.chrono=new $YB.utils.Chrono,this.options=t||{},this.options.interval=this.options.interval||800,this.options.threshold=this.options.threshold||400,this.options.skipMiniBuffer=this.options.skipMiniBuffer||!0,this.timer=null,this.lastPlayhead=0,this.autostart=!1}catch(i){$YB.error(i)}},$YB.utils.Buffer.prototype.start=function(){try{if(null===this.timer){var e=this;this.lastPlayhead=0,this.chrono.start(),this.timer=setInterval(function(){try{e.isAd?e._checkAdBuffer():e._checkBuffer()}catch(t){$YB.error(t)}},this.options.interval)}}catch(t){$YB.error(t)}},$YB.utils.Buffer.prototype.stop=function(){try{return clearInterval(this.timer),this.timer=null,this.chrono.stop()}catch(e){$YB.error(e)}},$YB.utils.Buffer.prototype._checkBuffer=function(){try{if(this.api.plugin.isJoinSent&&!this.api.plugin.isPaused&&!this.api.plugin.isSeeking&&!this.api.plugin.isShowingAds){var e=this.api;this._checkPlayhead(this.api.plugin.infoApi.getPlayhead(),this.api.plugin.isBuffering,function(){e.sendBufferStart()},function(){e.sendBufferEnd()})}}catch(t){$YB.error(t)}},$YB.utils.Buffer.prototype._checkAdBuffer=function(){try{if(this.api.adnalyzer.isAdJoinSent&&!this.api.adnalyzer.isAdPaused){var e=this.api;this._checkPlayhead(this.api.adnalyzer.plugin.infoApi.getAdPlayhead(),this.api.adnalyzer.isAdBuffering,function(){e.sendAdBufferStart()},function(){e.sendAdBufferEnd()})}}catch(t){$YB.error(t)}},$YB.utils.Buffer.prototype._checkPlayhead=function(e,t,i,n){try{var r=Math.abs(1e3*this.lastPlayhead-1e3*e);r>this.options.threshold?(this.lastPlayhead=e,t&&(!this.options.skipMiniBuffer||this.chrono.stop()>1.1*this.options.interval)&&n()):this.lastPlayhead&&!t&&r<this.options.threshold&&i()}catch(s){$YB.error(s)}},$YB.utils.Chrono=function(){try{this.startTime=0,this.lastTime=0}catch(e){$YB.error(e)}},$YB.utils.Chrono.prototype.getDeltaTime=function(e){try{return this.startTime?0===this.lastTime?e!==!1?this.stop():(new Date).getTime()-this.startTime:this.lastTime-this.startTime:-1}catch(t){$YB.error(t)}},$YB.utils.Chrono.prototype.start=function(){try{this.startTime=(new Date).getTime(),this.lastTime=0}catch(e){$YB.error(e)}},$YB.utils.Chrono.prototype.stop=function(){try{return this.lastTime=(new Date).getTime(),this.getDeltaTime()}catch(e){$YB.error(e)}},$YB.utils.parseNumber=function(e,t){return!isNaN(e)&&e>=0&&e!=1/0&&null!==e&&"undefined"!=typeof e?e:t},$YB.utils.listenAllEvents=function(e,t,i){try{if($YB.debugLevel>=4){i=i||function(e){var t="";"undefined"!=typeof e.target&&"undefined"!=typeof e.target.id&&(t=e.target.id),$YB.debug("Event: "+t+" > "+e.type)};var n=["canplay","buffering","waiting","ended","play","playing","pause","resume","error","abort","seek","seeking","seeked","stalled","dispose","loadeddata","loadstart"];t&&(null===t[0]?(t.shift(),n=t):n=n.concat(t));for(var r=0;r<n.length;r++)"function"==typeof e?e.call(window,n[r],i):e.on?e.on(n[r],i):e.addEventListener&&e.addEventListener(n[r],i)}}catch(s){$YB.error(s)}},$YB.utils.serialize=$YB.utils.listenAllEvents||function(){},$YB.debugLevel=2,$YB.plainConsole=!1,$YB.report=function(e,t,i){if(console&&console.log&&(t=t||4,i=i||"darkcyan",$YB.debugLevel>=t)){if($YB.plainConsole||document.documentMode)"string"==typeof e?console.log("[Youbora:"+t+"] "+e):(console.log("[Youbora:"+t+"] next line:"),console.log(e));else{var n=console.log;1==t&&console.error?n=console.error:2==t&&console.warn?n=console.warn:t>=4&&console.debug&&(n=console.debug),null!==e&&"object"==typeof e?n.call(console,"%c[Youbora] %o","color: "+i,e):n.call(console,"%c[Youbora] %c%s","color: "+i,"color: black",e)}"undefined"!=typeof $YB.remoteLog&&$YB.remoteLog.forced===!0&&$YB.remoteLog("[Youbora:"+t+"] "+e)}},$YB.error=function(e,t){$YB.report(e,1,t||"darkred")},$YB.warn=function(e,t){$YB.report(e,2,t||"darkorange")},$YB.notice=function(e,t){$YB.report(e,3,t||"darkcyan")},$YB.debug=function(e,t){$YB.report(e,4,t||"indigo")},$YB.requestLog=function(e,t){$YB.report(e,5,t||"navy")},function(){function e(e){switch(e){case"plain":$YB.plainConsole=!0;break;case"remote":$YB.remoteLog.forced=!0;break;case"plain+remote":case"remote+plain":$YB.remoteLog.forced=!0,$YB.plainConsole=!0}}try{if("undefined"!=typeof window){var t=document.getElementsByTagName("script");for(var i in t)if(t[i].getAttribute){var n=t[i].getAttribute("youbora-debug");n&&($YB.debugLevel=n),n=t[i].getAttribute("youbora-console"),n&&e(n)}var r=/\?.*\&*youbora-debug=(.+)/i.exec(window.location.search);null!==r&&($YB.debugLevel=r[1]),r=/\?.*\&*youbora-console=(.+)/i.exec(window.location.search),null!==r&&e(r[1])}}catch(s){$YB.error(s)}}();