/**
 * @license
 * Plugin 5.1.0-lg-moonstone <http://youbora.com/>
 * Copyright NicePopleAtWork <http://nicepeopleatwork.com/>
 */
"undefined"!=typeof $YB&&($YB.AjaxRequest.prototype.createXHR=function(){try{return new enyo.Ajax}catch(t){return $YB.error(t),{}}},$YB.AjaxRequest.prototype.getXHR=function(){return this.xhr.xhr},$YB.AjaxRequest.prototype.on=function(t,e){try{if("undefined"!=typeof e&&"function"!=typeof e)return $YB.warn("Warning: Request '"+this.getUrl()+"' has a callback that is not a function."),this;"error"==t?(this.hasError=!0,this.xhr.error(e)):this.xhr.response(e)}catch(r){$YB.error(r)}finally{return this}},$YB.AjaxRequest.prototype.send=function(){try{if(this.xhr.url=this.getUrl(),this.xhr.handleAs="xml",this.xhr.method=this.options.method,this.options.requestHeaders&&(this.xhr.headers=this.options.requestHeaders),!this.hasError&&this.options.retryAfter>0&&this.options.maxRetries>0){var t=this;this.error(function(){t.retries++,t.retries>t.options.maxRetries?$YB.error("Error: Aborting failed request. Max retries reached."):($YB.error("Error: Request failed. Retry "+t.retries+" of "+t.options.maxRetries+" in "+t.options.retryAfter+"ms."),setTimeout(function(){t.xhr.errorHandlers=[],t.send()},t.options.retryAfter))})}$YB.report("XHR Req: "+this.getUrl(),5,"navy"),this.xhr.go()}catch(e){$YB.error(e)}},$YB.plugins.LgMoonstone=function(t,e){try{this.pluginName="lg-moonstone",this.pluginVersion="5.1.0-lg-moonstone",this.init(t,e),this.tag=t.$.video.hasNode(),this.registerListeners()}catch(r){$YB.error(r)}},$YB.plugins.LgMoonstone.prototype=new $YB.plugins.Generic,$YB.plugins.LgMoonstone.prototype.getPlayhead=function(){return this.tag.currentTime},$YB.plugins.LgMoonstone.prototype.getMediaDuration=function(){return this.tag.duration},$YB.plugins.LgMoonstone.prototype.getResource=function(){return this.tag.currentSrc},$YB.plugins.LgMoonstone.prototype.getPlayerVersion=function(){return enyo.version.moonstone},$YB.plugins.LgMoonstone.prototype.init=function(){try{$YB.util.listenAllEvents(this.tag),this.yapi.startAutobuffer();var t=this;this.tag.addEventListener("play",function(e){try{t.yapi.isStartSent||t.videoApi.sendStart()}catch(r){$YB.error(r)}}),this.tag.addEventListener("playing",function(e){try{t.yapi.isStartSent&&(t.yapi.isPaused&&t.videoApi.sendResume(),t.yapi.isJoinSent||t.videoApi.sendJoin())}catch(r){$YB.error(r)}}),this.tag.addEventListener("pause",function(e){try{t.videoApi.sendPause()}catch(r){$YB.error(r)}}),this.tag.addEventListener("ended",function(e){try{t.videoApi.sendStop()}catch(r){$YB.error(r)}}),this.tag.addEventListener("error",function(e){try{t.videoApi.sendError({msg:"PLAY_FAILURE",errorCode:3001})}catch(r){$YB.error(r)}}),this.tag.addEventListener("seeking",function(e){try{t.videoApi.sendSeekStart()}catch(r){$YB.error(r)}}),this.tag.addEventListener("seeked",function(e){try{t.videoApi.sendSeekEnd()}catch(r){$YB.error(r)}})}catch(e){$YB.error(e)}});