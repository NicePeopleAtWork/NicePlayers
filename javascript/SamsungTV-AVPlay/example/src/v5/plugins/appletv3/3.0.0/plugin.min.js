/**
 * @license
 * Plugin 3.0.0-appletv3 <http://youbora.com/>
 * Copyright NicePopleAtWork <http://nicepeopleatwork.com/>
 */
$YB.AjaxRequest.options.retryAfter=0,$YB.plugins.AppleTv3=function(e,t){try{this.pluginName="appleTv3",this.pluginVersion="3.0.0-appleTv3",this.yapi=new $YB.Api(this,"appleTv3",e),this.referer=t,this.playhead=0,$YB.notice("Plugin "+this.pluginVersion+" is ready.")}catch(r){$YB.error(r)}},$YB.plugins.AppleTv3.prototype.didStopPlayingHandler=function(){try{$YB.debug("Event > Stop"),this.yapi.handleStop()}catch(e){$YB.error(e)}},$YB.plugins.AppleTv3.prototype.playerStateChangedHandler=function(e,t){try{switch($YB.debug("Event > StateChanged > "+e+" "+t),this.playhead=t,e){case"Playing":this.yapi.handleJoin(),this.yapi.isSeeking&&this.yapi.handleSeekEnd(),this.yapi.isBuffering&&this.yapi.handleBufferEnd(),this.yapi.isPaused&&this.yapi.handleResume();break;case"Paused":this.yapi.handlePause()}}catch(r){$YB.error(r)}},$YB.plugins.AppleTv3.prototype.onStartBufferingHandler=function(e){try{$YB.debug("Event > StartBuffer "+e),this.playhead=e,this.yapi.isStartSent?this.yapi.isSeeking||this.yapi.handleBufferStart():this.yapi.handleStart({referer:this.referer})}catch(t){$YB.error(t)}},$YB.plugins.AppleTv3.prototype.onBufferSufficientToPlayHandler=function(){try{$YB.debug("Event > EndBuffer")}catch(e){$YB.error(e)}},$YB.plugins.AppleTv3.prototype.playerWillSeekToTimeHandler=function(e){try{$YB.debug("Event > willSeek "+e),this.playhead=e,this.yapi.isSeeking||this.yapi.handleSeekStart()}catch(t){$YB.error(t)}},$YB.plugins.AppleTv3.prototype.onPlaybackErrorHandler=function(e){try{$YB.debug("Event > Error > "+e),this.yapi.handleError({errorCode:e,msg:e,referer:this.referer})}catch(t){$YB.error(t)}},$YB.plugins.AppleTv3.prototype.playerTimeDidChangeHandler=function(e){try{this.playhead=e}catch(t){$YB.error(t)}},$YB.plugins.AppleTv3.prototype.getMediaDuration=function(){return atv.player.currentItem.duration},$YB.plugins.AppleTv3.prototype.getPlayhead=function(){return this.playhead};