/**
 * @license
 * Plugin 5.1.0-videojs4 <http://youbora.com/>
 * Copyright NicePopleAtWork <http://nicepeopleatwork.com/>
 */
"undefined"!=typeof $YB&&($YB.plugins.Videojs4=function(t,e){try{this.pluginName="videojs4",this.pluginVersion="5.1.0-videojs4",this.init(t.id(),e),this.player=t,this.detectPlayer(),this.startAutobuffer(),t.ready(this.registerCommon),this.player.getPlaybackStatistics?t.ready(this.registerCastlabs):t.ready(this.registerGeneric)}catch(i){$YB.error(i)}},$YB.plugins.Videojs4.prototype=new $YB.plugins.Generic,$YB.plugins.Videojs4.prototype.detectPlayer=function(){this.playerType="videojs4",this.player.hls?this.playerType+="-hls":this.player.getPlaybackStatistics&&(this.playerType+="-castlabs"),this.player.ima&&(this.playerType+="-ima"),$YB.notice("Player detected: "+this.playerType)},$YB.plugins.Videojs4.prototype.getPlayhead=function(){return this.player.absoluteTime?this.player.absoluteTime():this.player.currentTime()},$YB.plugins.Videojs4.prototype.getMediaDuration=function(){return Math.round(this.player.duration())},$YB.plugins.Videojs4.prototype.getThroughput=function(){return this.player.hls&&this.player.hls.bandwidth?this.player.hls.bandwidth:-1},$YB.plugins.Videojs4.prototype.getBitrate=function(){return"function"==typeof this.player.getPlaybackStatistics?this.player.getPlaybackStatistics().video.bandwidth:this.player.hls&&this.player.hls.bytesReceived?this.player.hls.playlists.media().attributes.BANDWIDTH:-1},$YB.plugins.Videojs4.prototype.getRendition=function(){return $YB.utils.parseNumber(this.getBitrate(),"")},$YB.plugins.Videojs4.prototype.getResource=function(){return this.player.manifestUrl?this.player.manifestUrl:this.player.currentSrc()},$YB.plugins.Videojs4.prototype.getPlayerVersion=function(){return videojs.VERSION?this.playerType+" "+videojs.VERSION:void(this.player.mediaPlayer.getVersion&&this.playerType+" "+this.player.mediaPlayer.getVersion())},$YB.plugins.Videojs4.prototype.registerCommon=function(){try{$YB.utils.listenAllEvents(this),this.on("pause",function(t){this.youbora.plugin.pauseHandler()}),this.on("abort",function(t){this.youbora.plugin.endedHandler()}),this.on("ended",function(t){this.youbora.plugin.endedHandler()}),this.on("seeking",function(t){this.youbora.plugin.seekingHandler()}),this.on("timeupdate",function(t){try{this.youbora.plugin.getPlayhead()>.1&&this.youbora.plugin.playingHandler()}catch(e){$YB.error(e)}}),this.on("error",function(t){try{this.youbora.plugin.errorHandler(this.error().code,this.error().message),this.youbora.plugin.stopHandler()}catch(e){$YB.error(e)}})}catch(t){$YB.error(t)}},$YB.plugins.Videojs4.prototype.registerCastlabs=function(){try{this.on("play",function(t){this.youbora.plugin.playHandler()}),this.on("loadstart",function(t){this.youbora.plugin.playHandler()})}catch(t){$YB.error(t)}},$YB.plugins.Videojs4.prototype.registerGeneric=function(){try{this.on("play",function(t){this.youbora.plugin.playHandler()})}catch(t){$YB.error(t)}}),"undefined"!=typeof videojs&&videojs.plugin("youbora",function(t){"undefined"==typeof this.youbora.plugin?this.youbora.plugin=new $YB.plugins.Videojs4(this,t):this.youbora.plugin.setOptions(t)});