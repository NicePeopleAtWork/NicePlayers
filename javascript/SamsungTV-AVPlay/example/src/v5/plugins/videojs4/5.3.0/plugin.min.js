/**
 * @license
 * Plugin 5.3.0-videojs4 <http://youbora.com/>
 * Copyright NicePopleAtWork <http://nicepeopleatwork.com/>
 */
"undefined"!=typeof $YB&&($YB.plugins.Videojs4=function(e,i){try{this.pluginName="videojs4-unknown",this.pluginVersion="5.3.0-videojs4",this.startMonitoring(e,i),this.playerId=e.id(),this.enableBufferMonitor(),e.ready(this.registerCommon)}catch(t){$YB.error(t)}},$YB.plugins.Videojs4.prototype=new $YB.plugins.Generic,$YB.plugins.Videojs4.prototype.detectPlayer=function(){this.pluginName="videojs4",this.player.hls?this.pluginName+="-hls":this.player.getPlaybackStatistics&&(this.pluginName+="-castlabs"),this.player.mediainfo&&(this.pluginName+="-bcove"),(this.player.ima||this.player.ima3)&&(this.pluginName+="-ima"),this.player.FreeWheelPlugin&&(this.pluginName+="-fw"),$YB.notice("Player detected: "+this.pluginName),this.connectAdnalyzers()},$YB.plugins.Videojs4.prototype.getPlayhead=function(){return this.player.absoluteTime?this.player.absoluteTime():this.player.currentTime()},$YB.plugins.Videojs4.prototype.getMediaDuration=function(){return this.player.mediainfo&&"undefined"!=typeof this.player.mediainfo.duration?Math.round(this.player.mediainfo.duration):Math.round(this.player.duration())},$YB.plugins.Videojs4.prototype.getThroughput=function(){try{return this.player.hls&&this.player.hls.bandwidth?this.player.hls.bandwidth:-1}catch(e){return-1}},$YB.plugins.Videojs4.prototype.getBitrate=function(){try{return"function"==typeof this.player.getPlaybackStatistics?this.player.getPlaybackStatistics().video.bandwidth:this.player.hls&&this.player.hls.bytesReceived?this.player.hls.playlists.media().attributes.BANDWIDTH:-1}catch(e){return-1}},$YB.plugins.Videojs4.prototype.getRendition=function(){try{if(this.player.hls){var e=this.player.hls.playlists.media().attributes;return e.NAME?e.NAME:e.RESLOUTION.width?e.RESOLUTION.width+"x"+e.RESOLUTION.height+"@"+e.BANDWIDTH:null}return null}catch(i){return null}},$YB.plugins.Videojs4.prototype.getResource=function(){return this.player.manifestUrl?this.player.manifestUrl:this.player.ads&&this.player.ads.contentSrc?this.player.ads.contentSrc:this.player.src&&this.player.src()?this.player.src():this.player.currentSrc()},$YB.plugins.Videojs4.prototype.getPlayerVersion=function(){return videojs.VERSION?this.pluginName+" "+videojs.VERSION:this.player.mediaPlayer.getVersion?this.pluginName+" "+this.player.mediaPlayer.getVersion():void 0},$YB.plugins.Videojs4.prototype.getTitle=function(){return this.player.mediainfo&&this.player.mediainfo.name?this.player.mediainfo.name:void 0},$YB.plugins.Videojs4.prototype.registerCommon=function(){try{$YB.utils.listenAllEvents(this),this.on("loadstart",function(e){this.youbora.plugin.detectPlayer()}),this.on("play",function(e){this.youbora.plugin.playHandler(),this.youbora.plugin.adnalyzer&&this.youbora.plugin.adnalyzer.registerVideojs&&this.youbora.plugin.adnalyzer.registerVideojs()}),this.on("playing",function(e){this.youbora.plugin.resumeHandler()}),this.on("pause",function(e){this.youbora.plugin.pauseHandler()}),this.on("abort",function(e){this.youbora.plugin.endedHandler()}),this.on("ended",function(e){this.youbora.plugin.endedHandler()}),this.on("seeking",function(e){this.youbora.plugin.seekingHandler()}),this.on("seeked",function(e){this.youbora.plugin.seekPlayhead=this.youbora.plugin.getPlayhead()}),this.on("timeupdate",function(e){try{this.youbora.plugin.getPlayhead()>.1&&(this.youbora.plugin.joinHandler(),this.youbora.plugin.seekPlayhead&&this.youbora.plugin.seekPlayhead!=this.youbora.plugin.getPlayhead()&&(this.youbora.plugin.seekedHandler(),this.youbora.plugin.seekPlayhead=!1))}catch(i){$YB.error(i)}}),this.on("error",function(e){try{this.youbora.plugin.errorHandler(this.error().code,this.error().message)}catch(i){$YB.error(i)}})}catch(e){$YB.error(e)}},$YB.plugins.Videojs4.prototype.connectAdnalyzers=function(){"undefined"!=typeof $YB.adnalyzers.Ima&&this.player.ima&&(this.adnalyzer=new $YB.adnalyzers.Ima(this)),"undefined"!=typeof $YB.adnalyzers.BrightcoveAds&&this.player.mediainfo&&this.player.ads&&this.player.ima3&&(this.adnalyzer=new $YB.adnalyzers.BrightcoveAds(this))}),"undefined"!=typeof videojs&&videojs.plugin("youbora",function(e){"undefined"==typeof this.youbora.plugin?this.youbora.plugin=new $YB.plugins.Videojs4(this,e):this.youbora.plugin.setOptions(e)});