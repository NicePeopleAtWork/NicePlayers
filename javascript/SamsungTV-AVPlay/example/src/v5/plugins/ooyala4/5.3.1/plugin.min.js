/**
 * @license
 * Plugin 5.3.1-ooyala4 <http://youbora.com/>
 * Copyright NicePopleAtWork <http://nicepeopleatwork.com/>
 */
"undefined"!=typeof $YB&&($YB.plugins.Ooyala4=function(e,t){try{this.pluginName="ooyala4",this.pluginVersion="5.3.1-ooyala4",e?(this.startMonitoring(e.getElementId(),t),this.player=e):this.resetValues()}catch(i){$YB.error(i)}},$YB.plugins.Ooyala4.prototype=new $YB.plugins.Generic,$YB.plugins.Ooyala4.prototype.resetValues=function(){this.playhead=0,this.resource="",this.title="",this.duration=0,this.bitrate=-1,this.isLive=!1,this.rendition=""},$YB.plugins.Ooyala4.prototype.getPlayhead=function(){return this.player?this.player.getPlayheadTime():this.playhead},$YB.plugins.Ooyala4.prototype.getMediaDuration=function(){return this.player?this.player.getDuration():this.duration},$YB.plugins.Ooyala4.prototype.getIsLive=function(){return this.isLive},$YB.plugins.Ooyala4.prototype.getTitle=function(){return this.player?this.player.getTitle():this.title},$YB.plugins.Ooyala4.prototype.getResource=function(){return this.resource?this.resource:void 0},$YB.plugins.Ooyala4.prototype.getPlayerVersion=function(){return"Ooyala V4 "+OO.VERSION.core.rev},$YB.plugins.Ooyala4.prototype.getBitrate=function(){return this.player?this.player.getCurrentBitrate():this.bitrate},$YB.plugins.Ooyala4.prototype.getRendition=function(){return this.rendition?this.rendition:null},$YB.plugins.Ooyala4.prototype.processEvent=function(e,t){try{switch($YB.debugLevel>=4&&"video_stream_downloading"!=e&&"video_stream_position_changed"!=e&&($YB.debug("Event: "+e),t[0]&&$YB.debug(t[0])),e){case"video_stream_position_changed":this.isShowingAds||(this.playhead=t[0].streamPosition,this.duration=t[0].totalStreamDuration);break;case"initial_playback_requested":this.playHandler();break;case"video_buffering_started":!this.viewManager.isSeeking&&t[0].streamUrl.startsWith(this.resource)&&this.bufferingHandler();break;case"video_buffering_ended":this.joinHandler(),this.viewManager.isBuffering&&this.bufferedHandler();break;case"video_pause_requested":this.pauseHandler();break;case"video_playing":this.resumeHandler();break;case"video_seek_requested":this.seekingHandler();break;case"video_seek_completed":this.seekedHandler();break;case"ad_break_started":this.ignoringAdHandler();break;case"ad_break_ended":this.ignoredAdHandler();break;case"playback_completed":this.endedHandler();break;case"video_content_metadata_updated":this.title=t[0].title,this.duration=t[0].duration/1e3;break;case"video_element_created":this.resource=t[0].streamUrl;break;case"stream_type_updated":this.isLive=!("vod"==t[0].streamType);break;case"video_stream_bitrate_changed":this.bitrate=t[0].bitrate,isNaN(t[0].id)?this.rendition=t[0].id:t[0].width&&t[0].height&&t[0].bitrate?this.rendition=t[0].width+"x"+t[0].height+"@"+t[0].bitrate:this.rendition=null}}catch(i){$YB.error(i)}},$YB.plugins.Ooyala4.AnalyticsFramework=function(e){this.framework=e,this.name="youbora",this.id,this.active=!0,this.plugin=new $YB.plugins.Ooyala4,this.getName=function(){return this.name},this.getVersion=function(){return this.plugin.pluginVersion},this.setPluginID=function(e){this.id=e},this.getPluginID=function(){return this.id},this.init=function(){var e;if(this.framework){e=this.framework.getRecordedEvents();for(var t in e){var i=e[t];this.plugin.processEvent(i.eventName,i.params)}}},this.setMetadata=function(e){$YB.notice("Ooyala Analytics Framework Plugin "+this.id+" is ready."),this.plugin.startMonitoring(null,e),"undefined"!=typeof e.debug&&($YB.debugLevel=e.debug)},this.processEvent=function(e,t){this.plugin.processEvent(e,t)},this.destroy=function(){delete this.framework,delete this.plugin}},"undefined"!=typeof OO?OO.Analytics?OO.Analytics.RegisterPluginFactory($YB.plugins.Ooyala4.AnalyticsFramework):$YB.error("OO.Analytics not found. This plugin is designed for Ooyala V4."):$YB.error("Ooyala library not yet loaded."));