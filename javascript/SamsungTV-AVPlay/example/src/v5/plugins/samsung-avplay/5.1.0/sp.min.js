/**
 * @license
 * youboralib 5.1-RC <http://youbora.com/>
 * Copyright NicePopleAtWork <http://nicepeopleatwork.com/>
 */
var $YB=$YB||{version:"5.1-RC",plugins:{},adnalyzers:{},utils:{},services:{}};$YB.AjaxRequest=function(e,t,i,r){try{this.xhr=this.createXHR(),this.host=e,this.service=t||"",this.params=i,this.options=r||{},this.options.method=this.options.method||$YB.AjaxRequest.options.method,this.options.maxRetries=this.options.maxRetries||$YB.AjaxRequest.options.maxRetries,"udefined"==typeof this.options.retryAfter&&(this.options.retryAfter=$YB.AjaxRequest.options.retryAfter),this.hasError=!1,this.retries=0}catch(s){$YB.error(s)}},$YB.AjaxRequest.options={method:"GET",requestHeaders:{},maxRetries:3,retryAfter:5e3},$YB.AjaxRequest.prototype.getUrl=function(){try{return this.host+this.service+this.getParams()}catch(e){$YB.error(e)}},$YB.AjaxRequest.prototype.getParams=function(){try{switch(typeof this.params){case"object":return"?"+this._parseParams(this.params);case"string":return this.params?"?"+this.params:"";default:return""}}catch(e){$YB.error(e)}},$YB.AjaxRequest.prototype.setParam=function(e,t){try{switch(typeof this.params){case"string":this.params.length>0&&(this.params+="&"),this.params+=e+"="+t;break;case"object":default:this.params[e]=t}return this}catch(i){return $YB.error(i),this}},$YB.AjaxRequest.prototype.on=function(e,t){try{"error"==e&&(this.hasError=!0),"function"==typeof t?this.xhr.addEventListener(e,t,!1):"undefined"!=typeof t&&$YB.warn("Warning: Request '"+this.getUrl()+"' has a callback that is not a function.")}catch(i){$YB.error(i)}finally{return this}},$YB.AjaxRequest.prototype.load=function(e){return this.on("load",e)},$YB.AjaxRequest.prototype.error=function(e){return this.on("error",e)},$YB.AjaxRequest.prototype.send=function(){try{if(this.xhr.open(this.options.method,this.getUrl(),!0),this.options.requestHeaders)for(var e in this.options.requestHeaders)this.options.requestHeaders.hasOwnProperty(e)&&this.xhr.setRequestHeader(e,this.options.requestHeaders[e]);if(!this.hasError&&this.options.retryAfter>0&&this.options.maxRetries>0){var t=this;this.error(function r(){t.retries++,t.retries>t.options.maxRetries?$YB.error("Error: Aborting failed request. Max retries reached."):($YB.error("Error: Request failed. Retry "+t.retries+" of "+t.options.maxRetries+" in "+t.options.retryAfter+"ms."),setTimeout(function(){t.xhr.removeEventListener("error",r),t.send()},t.options.retryAfter))})}$YB.report("XHR Req: "+this.getUrl(),5,"navy"),this.xhr.send()}catch(i){$YB.error(i)}},$YB.AjaxRequest.prototype.createXHR=function(){try{return"undefined"!=typeof XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.xhr")}catch(e){return $YB.error(e),{}}},$YB.AjaxRequest.prototype.getXHR=function(){return this.xhr},$YB.AjaxRequest.prototype._parseParams=function(e){try{if("string"==typeof e)return e;if(null!==e&&"object"==typeof e){var t="";for(var i in e)null!==e[i]&&"object"==typeof e[i]?t+=encodeURIComponent(i)+"="+encodeURIComponent(JSON.stringify(e[i]))+"&":null!==e[i]&&"undefined"!=typeof e[i]&&""!==e[i]&&(t+=encodeURIComponent(i)+"="+encodeURIComponent(e[i])+"&");return t.slice(0,-1)}return""}catch(r){return $YB.error(r),""}},$YB.AdsApi=function(e){this.yapi=e,this.buffer=new $YB.utils.Buffer(this),this.chrono={total:new $YB.utils.Chrono,joinTime:new $YB.utils.Chrono,buffer:this.buffer.chrono}},$YB.AdsApi.prototype={counter:{pre:0,mid:0,post:0,unknown:0},totalPrerollTime:0,position:""},$YB.AdsApi.prototype.handleAdStart=function(e,t){try{this.yapi.isStartSent&&(this.yapi.isAdStartSent&&this.handleStop(),this.buffer.autostart&&this.buffer.start(),this.yapi.isAdStartSent=!0,this.chrono.total.start(),this.chrono.joinTime.start(),e=e||{},e.resource=$YB.utils.getFirstDefined(e.resource,this.getAdResource()),e.position=$YB.utils.getFirstDefined(e.position,this.getAdPosition()),e.number=$YB.utils.getFirstDefined(e.number,this._getNumber(e.position)),e.campaign=$YB.utils.getFirstDefined(e.campaign,this.yapi.data.ads.campaign),e.title=$YB.utils.getFirstDefined(e.title,this.getAdTitle()),e.adDuration=$YB.utils.getFirstDefined(e.adDuration,this.yapi.data.ads.duration),e.playhead=$YB.utils.getFirstDefined(e.playhead,this.yapi.getAdPlayhead()),"undefined"!=typeof e.durationJointime&&(this.yapi.isAdJoinSent=!0),this.position=arams.position,this.yapi.comm.sendRequest("/adStart",e,t),$YB.notice("Request: NQS /adStart "+e.position+e.number,"darkgreen"))}catch(i){$YB.error(i)}},$YB.AdsApi.prototype.handleAdJoin=function(e,t){try{this.yapi.isAdStartSent&&!this.yapi.isAdJoinSent&&(this.yapi.isAdJoinSent=!0,this.buffer.autostart&&this.buffer.start(),e=e||{},e.adPlayhead=$YB.utils.getFirstDefined(e.adPlayhead,this.getAdPlayhead()),e.duration=$YB.utils.getFirstDefined(e.duration,this.chrono.joinTime.getDeltaTime()),this.yapi.comm.sendRequest("/adJoinTime",e,t),$YB.notice("Request: NQS /adJoinTime "+e.duration+"ms","darkgreen"))}catch(i){$YB.error(i)}},$YB.AdsApi.prototype.handleAdStop=function(e,t){try{this.yapi.isAdStartSent&&(this.yapi.isAdStartSent=!1,this.yapi.isAdJoinSent=!1,this.yapi.isAdBuffering=!1,this.buffer.stop(),e=e||{},e.totalDuration=$YB.utils.getFirstDefined(e.totalDuration,this.chrono.total.getDeltaTime()),e.adPlayhead=$YB.utils.getFirstDefined(e.adPlayhead,this.getAdPlayhead()),e.adBitrate=$YB.utils.getFirstDefined(e.adBitrate,this.getAdBitrate()),"pre"!=this.position||this.yapi.isJoinSent||(this.totalPrerollTime+=e.totalDuration),this.yapi.comm.sendRequest("/adStop",e,t),$YB.notice("Request: NQS /adStop "+e.totalDuration+"ms","darkgreen"))}catch(i){$YB.error(i)}},$YB.AdsApi.prototype.startAdAutobuffer=function(){this.yapi.data.enableNiceBuffer&&(this.buffer.autostart=!0)},$YB.AdsApi.prototype.handleAdBufferStart=function(){try{this.yapi.isAdJoinSent&&!this.yapi.isAdBuffering&&(this.yapi.isAdBuffering=!0,this.chrono.buffer.start())}catch(e){$YB.error(e)}},$YB.AdsApi.prototype.handleAdBufferEnd=function(e,t){try{this.yapi.isAdJoinSent&&this.yapi.isAdBuffering&&(this.yapi.isAdBuffering=!1,e=e||{},e.adPlayhead=$YB.utils.getFirstDefined(e.adPlayhead,this.getAdPlayhead()),e.duration=$YB.utils.getFirstDefined(e.duration,this.chrono.buffer.getDeltaTime()),this.yapi.commsendRequest("/adBufferUnderrun",e,t),$YB.notice("Request: NQS /adBufferUnderrun "+e.duration+"ms","darkgreen"))}catch(i){$YB.error(i)}},$YB.AdsApi.prototype._getNumber=function(e){switch(e){case"pre":return++this.counter.pre;case"mid":return++this.counter.mid;case"post":return++this.counter.post;default:return++this.counter.unknown}},$YB.AdsApi.prototype.getAdResource=function(){try{return"undefined"!=typeof this.yapi.data.ads.resource?this.yapi.data.ads.resource:"undefined"!=typeof this.yapi.plugin.ads&&"function"==typeof this.yapi.plugin.ads.getAdResource?this.yapi.plugin.ads.getAdResource():""}catch(e){return $YB.warn(e),""}},$YB.AdsApi.prototype.getAdPlayhead=function(){try{return"undefined"!=typeof this.yapi.plugin.ads&&"function"==typeof this.yapi.plugin.ads.getAdPlayhead?this.yapi.plugin.ads.getAdPlayhead():0}catch(e){return $YB.warn(e),0}},$YB.AdsApi.prototype.getAdPosition=function(){try{return"undefined"!=typeof this.yapi.data.ads.position?this.yapi.data.ads.position:"undefined"!=typeof this.yapi.plugin.ads&&"function"==typeof this.yapi.plugin.ads.getAdPosition?this.yapi.plugin.ads.getAdPosition():"unknown"}catch(e){return $YB.warn(e),"unknown"}},$YB.AdsApi.prototype.getAdTitle=function(){try{return"undefined"!=typeof this.yapi.data.ads.title?this.yapi.data.ads.title:"undefined"!=typeof this.yapi.plugin.ads&&"function"==typeof this.yapi.plugin.ads.getAdTitle?this.yapi.plugin.ads.getAdTitle():""}catch(e){return $YB.warn(e),""}},$YB.AdsApi.prototype.getAdDuration=function(){try{if("undefined"!=typeof this.yapi.data.ads.duration)return this.yapi.data.ads.duration;if("undefined"!=typeof this.yapi.plugin.ads&&"function"==typeof this.yapi.plugin.ads.getAdDuration){var e=this.yapi.plugin.ads.getAdDuration();return 0===e||e==1/0||isNaN(e)?0:Math.round(e)}return 0}catch(t){return $YB.warn(t),0}},$YB.AdsApi.prototype.getAdBitrate=function(){try{return"undefined"!=typeof this.yapi.plugin.ads&&"function"==typeof this.yapi.plugin.ads.getAdBitrate?Math.round(this.yapi.plugin.ads.getAdBitrate()):-1}catch(e){return $YB.warn(e),-1}},$YB.PingApi=function(e){try{this.time=0,this.yapi=e,this.interval=5e3,this.isRunning=!1,this.timer=null,this.changedEntities=[],this.lastRendition=""}catch(t){$YB.error(t)}},$YB.PingApi.prototype.getDeltaTime=function(){return this.time?(new Date).getTime()-this.time:-1},$YB.PingApi.prototype.start=function(){try{this.isRunning=!0,this._setPing(),$YB.notice("Sending pings every "+this.interval+"ms.","darkgreen")}catch(e){$YB.error(e)}},$YB.PingApi.prototype.stop=function(){try{this.isRunning=!1,clearTimeout(this.timer)}catch(e){$YB.error(e)}},$YB.PingApi.prototype._setPing=function(){try{if(this.isRunning){var e=this;this.time=(new Date).getTime(),this.timer=setTimeout(function(){e.handlePing({diffTime:e.getDeltatime}),e._setPing()},this.interval)}}catch(t){$YB.error(t)}},$YB.PingApi.prototype.handlePing=function(e,t){try{e=e||{},e.time=$YB.utils.getFirstDefined(e.time,this.yapi.video.getPlayhead()),e.bitrate=$YB.utils.getFirstDefined(e.bitrate,this.yapi.video.getBitrate()),e.throughput=$YB.utils.getFirstDefined(e.throughput,this.yapi.video.getThroughput()),e.totalBytes=$YB.utils.getFirstDefined(e.totalBytes,0),e.pingTime=$YB.utils.getFirstDefined(e.pingTime,this.yapi.comm.pingTime);var i=this.yapi.video.getRendition();if(this.lastRendition!=i&&(this.changeEntity("rendition",i),this.lastRendition=i),2==this.changedEntities.length)e.entityType=$YB.utils.getFirstDefined(e.entityType,this.changedEntities.shift()),e.entityValue=$YB.utils.getFirstDefined(e.entityValue,this.changedEntities.shift());else if(this.changedEntities.length>2){for(var r={};this.changedEntities.length>0;)r[this.changedEntities.shift()]=this.changedEntities.shift();e.entityValue=$YB.utils.getFirstDefined(e.entityValue,JSON.stringify(r))}this.yapi.isStartSent&&(e.adPlayhead=$YB.utils.getFirstDefined(e.adPlayhead,this.yapi.ads.getAdPlayhead()),e.adBitrate=$YB.utils.getFirstDefined(e.adBitrate,this.yapi.ads.getAdBitrate())),this.yapi.comm.sendRequest("/ping",e,t)}catch(s){$YB.error(s)}},$YB.PingApi.prototype.changeEntity=function(e,t){try{this.changedEntities.push(e),this.changedEntities.push(t)}catch(i){$YB.error(i)}},$YB.VideoApi=function(e){this.yapi=e,this.yapi.buffer=new $YB.utils.Buffer(this),this.yapi.chrono={seek:new $YB.utils.Chrono,pause:new $YB.utils.Chrono,joinTime:new $YB.utils.Chrono,buffer:this.yapi.buffer.chrono},this.lastBitrate=0,this.lastDuration=0},$YB.VideoApi.prototype.handleStart=function(e,t){try{this.yapi.isStartSent&&this.handleStop(),(this.yapi.data.parseCDNNodeHost||this.yapi.data.parseHLS)&&this.yapi.resourceParser.init(),this.yapi.isStartSent=!0,this.yapi.chrono.joinTime.start(),this.yapi.pinger.start(),this._consolidateTitle(),e=e||{},e.system=$YB.utils.getFirstDefined(e.system,this.yapi.data.accountCode),e.player=$YB.utils.getFirstDefined(e.player,this.yapi.plugin.pluginName),e.pluginVersion=$YB.utils.getFirstDefined(e.pluginVersion,this.yapi.plugin.pluginVersion),e.playerVersion=$YB.utils.getFirstDefined(e.playerVersion,this.getPlayerVersion()),e.resource=$YB.utils.getFirstDefined(e.resource,this.getResource()),e.duration=$YB.utils.getFirstDefined(e.duration,this.getMediaDuration()),e.live=$YB.utils.getFirstDefined(e.live,this.getIsLive()),e.rendition=$YB.utils.getFirstDefined(e.rendition,this.getRendition()),e.user=$YB.utils.getFirstDefined(e.user,this.yapi.data.username),e.transcode=$YB.utils.getFirstDefined(e.transcode,this.yapi.data.transactionCode),e.title=$YB.utils.getFirstDefined(e.title,this.yapi.data.media.title),e.properties=$YB.utils.getFirstDefined(e.properties,this.yapi.data.properties),e.hashTitle=$YB.utils.getFirstDefined(e.hashTitle,this.yapi.data.hashTitle),e.cdn=$YB.utils.getFirstDefined(e.cdn,this.yapi.data.network.cdn),e.isp=$YB.utils.getFirstDefined(e.isp,this.yapi.data.network.isp),e.ip=$YB.utils.getFirstDefined(e.ip,this.yapi.data.network.ip),e.param1=$YB.utils.getFirstDefined(e.param1,this.yapi.data.extraParams.param1),e.param2=$YB.utils.getFirstDefined(e.param2,this.yapi.data.extraParams.param2),e.param3=$YB.utils.getFirstDefined(e.param3,this.yapi.data.extraParams.param3),e.param4=$YB.utils.getFirstDefined(e.param4,this.yapi.data.extraParams.param4),e.param5=$YB.utils.getFirstDefined(e.param5,this.yapi.data.extraParams.param5),e.param6=$YB.utils.getFirstDefined(e.param6,this.yapi.data.extraParams.param6),e.param7=$YB.utils.getFirstDefined(e.param7,this.yapi.data.extraParams.param7),e.param8=$YB.utils.getFirstDefined(e.param8,this.yapi.data.extraParams.param8),e.param9=$YB.utils.getFirstDefined(e.param9,this.yapi.data.extraParams.param9),e.param10=$YB.utils.getFirstDefined(e.param10,this.yapi.data.extraParams.param10),e.totalBytes=$YB.utils.getFirstDefined(e.totalBytes,this.getTotalBytes()),e.pingTime=$YB.utils.getFirstDefined(e.pingTime,this.yapi.comm.pingTime),e.referer=$YB.utils.getFirstDefined(e.referer,"undefined"!=typeof window?window.location.href:""),e.properties=$YB.utils.getFirstDefined(e.properties,{}),this.yapi.data.parseCDNNodeHost&&(e.nodeHost=$YB.utils.getFirstDefined(e.nodeHost,this.yapi.resourceParser.cdnHost),e.nodeType=$YB.utils.getFirstDefined(e.nodeType,this.yapi.resourceParser.cdnType)),this.yapi.data.resumeConfig.enabled&&(this.yapi.resume.start(),e.isResumed=this.yapi.resume.isResumed),1==this.yapi.data.isBalanced&&(e.isBalanced=1),this.yapi.comm.nextView(e.live),this.yapi.comm.sendRequest("/start",e,t),this.lastDuration=e.duration,$YB.notice("Request: NQS /start "+e.resource,"darkgreen")}catch(i){$YB.error(i)}},$YB.VideoApi.prototype._consolidateTitle=function(){try{this.yapi.data&&this.yapi.data.media&&this.yapi.data.media.title&&(this.yapi.data.properties.content_metadata?this.yapi.data.properties.content_metadata.title=this.yapi.data.media.title:this.yapi.data.properties.content_metadata={title:this.yapi.data.media.title})}catch(e){$YB.error(e)}},$YB.VideoApi.prototype.handleJoin=function(e,t){try{this.yapi.isStartSent&&!this.yapi.isJoinSent&&(this.yapi.isJoinSent=!0,this.yapi.buffer.autostart&&this.yapi.buffer.start(),e=e||{},e.time=$YB.utils.getFirstDefined(e.time,this.yapi.chrono.joinTime.getDeltaTime()),e.eventTime=$YB.utils.getFirstDefined(e.eventTime,this.getPlayhead()),e.mediaDuration=$YB.utils.getFirstDefined([e.mediaDuration,this.getMediaDuration()]),e.mediaDuration===this.lastDuration&&delete e.mediaDuration,this.yapi.ads.totalPrerollTime>0&&(e.time=e.time-this.yapi.ads.totalPrerollTime),this.yapi.comm.sendRequest("/joinTime",e,t),$YB.notice("Request: NQS /joinTime "+e.time+"ms","darkgreen"))}catch(i){$YB.error(i)}},$YB.VideoApi.prototype.handleStop=function(e,t){try{this.yapi.isStartSent&&(this.yapi.isStartSent=!1,this.yapi.isPaused=!1,this.yapi.isJoinSent=!1,this.yapi.isSeeking=!1,this.yapi.isBuffering=!1,this.yapi.resourceParser.clear(),this.yapi.pinger.stop(),this.yapi.buffer.stop(),e=e||{},e.diffTime=$YB.utils.getFirstDefined(e.diffTime,this.yapi.pinger.getDeltaTime()),this.yapi.comm.sendRequest("/stop",e,t),$YB.notice("Request: NQS /stop","darkgreen"),this.yapi.data.resumeConfig.enabled&&this.yapi.resume.sendPlayTime())}catch(i){$YB.error(i)}},$YB.VideoApi.prototype.handlePause=function(e,t){try{!this.yapi.isJoinSent||this.yapi.isPaused||this.yapi.isSeeking||this.yapi.ads.isStartSent||(this.yapi.isPaused=!0,this.yapi.chrono.pause.start(),this.yapi.comm.sendRequest("/pause",e,t),$YB.notice("Request: NQS /pause","darkgreen"),this.yapi.data.resumeConfig.enabled&&this.yapi.resume.sendPlayTime())}catch(i){$YB.error(i)}},$YB.VideoApi.prototype.handleResume=function(e,t){try{this.yapi.isJoinSent&&this.yapi.isPaused&&!this.yapi.isSeeking&&!this.yapi.ads.isStartSent&&(this.yapi.isPaused=!1,this.yapi.chrono.pause.getDeltaTime(),this.yapi.comm.sendRequest("/resume",e,t),$YB.notice("Request: NQS /resume","darkgreen"))}catch(i){$YB.error(i)}},$YB.VideoApi.prototype.startAutobuffer=function(){this.yapi.data.enableNiceBuffer&&(this.yapi.buffer.autostart=!0)},$YB.VideoApi.prototype.handleBufferStart=function(){try{this.yapi.isJoinSent&&!this.yapi.isBuffering&&(this.yapi.isBuffering=!0,this.yapi.chrono.buffer.start())}catch(e){$YB.error(e)}},$YB.VideoApi.prototype.handleBufferEnd=function(e,t){try{this.yapi.isJoinSent&&this.yapi.isBuffering&&(this.yapi.isBuffering=!1,e=e||{},e.duration=$YB.utils.getFirstDefined(e.duration,this.yapi.chrono.buffer.getDeltaTime()),e.time=$YB.utils.getFirstDefined(e.time,this.getPlayhead()),this.getIsLive()&&0===e.time&&(e.time=1),this.yapi.comm.sendRequest("/bufferUnderrun",e,t),$YB.notice("Request: NQS /bufferUnderrun "+e.duration+"ms","darkgreen"))}catch(i){$YB.error(i)}},$YB.VideoApi.prototype.handleError=function(e,t){try{this._consolidateTitle(),e=e||{},e.system=$YB.utils.getFirstDefined(e.system,this.yapi.data.accountCode),e.player=$YB.utils.getFirstDefined(e.player,this.yapi.plugin.pluginName),e.pluginVersion=$YB.utils.getFirstDefined(e.pluginVersion,this.yapi.plugin.pluginVersion),e.playerVersion=$YB.utils.getFirstDefined(e.playerVersion,this.getPlayerVersion()),e.resource=$YB.utils.getFirstDefined(e.resource,this.getResource()),e.duration=$YB.utils.getFirstDefined(e.duration,this.getMediaDuration()),e.live=$YB.utils.getFirstDefined(e.live,this.getIsLive()),e.user=$YB.utils.getFirstDefined(e.user,this.yapi.data.username),e.transcode=$YB.utils.getFirstDefined(e.transcode,this.yapi.data.transactionCode),e.title=$YB.utils.getFirstDefined(e.title,this.yapi.data.media.title),e.properties=$YB.utils.getFirstDefined(e.properties,this.yapi.data.properties),e.hashTitle=$YB.utils.getFirstDefined(e.hashTitle,this.yapi.data.hashTitle),e.cdn=$YB.utils.getFirstDefined(e.cdn,this.yapi.data.network.cdn),e.isp=$YB.utils.getFirstDefined(e.isp,this.yapi.data.network.isp),e.ip=$YB.utils.getFirstDefined(e.ip,this.yapi.data.network.ip),e.param1=$YB.utils.getFirstDefined(e.param1,this.yapi.data.extraParams.param1),e.param2=$YB.utils.getFirstDefined(e.param2,this.yapi.data.extraParams.param2),e.param3=$YB.utils.getFirstDefined(e.param3,this.yapi.data.extraParams.param3),e.param4=$YB.utils.getFirstDefined(e.param4,this.yapi.data.extraParams.param4),e.param5=$YB.utils.getFirstDefined(e.param5,this.yapi.data.extraParams.param5),e.param6=$YB.utils.getFirstDefined(e.param6,this.yapi.data.extraParams.param6),e.param7=$YB.utils.getFirstDefined(e.param7,this.yapi.data.extraParams.param7),e.param8=$YB.utils.getFirstDefined(e.param8,this.yapi.data.extraParams.param8),e.param9=$YB.utils.getFirstDefined(e.param9,this.yapi.data.extraParams.param9),e.param10=$YB.utils.getFirstDefined(e.param10,this.yapi.data.extraParams.param10),e.msg=$YB.utils.getFirstDefined(e.msg,"Unknown Error"),e.referer=$YB.utils.getFirstDefined(e.referer,"undefined"!=typeof window?window.location.href:""),("undefined"==typeof e.errorCode||parseInt(e.errorCode)<0)&&(e.errorCode=9e3),this.yapi.data.parseCDNNodeHost&&(e.nodeHost=$YB.utils.getFirstDefined(e.nodeHost,this.yapi.resourceParser.cdnHost),e.nodeType=$YB.utils.getFirstDefined(e.nodeType,this.yapi.resourceParser.cdnType)),this.yapi.data.resumeConfig.enabled&&(this.yapi.resume.start(),e.isResumed=this.yapi.resume.isResumed),1==this.yapi.data.isBalanced&&(e.isBalanced=1),this.yapi.comm.sendRequest("/error",e,t),$YB.notice("Request: NQS /error "+e.msg,"darkgreen")}catch(i){$YB.error(i)}},$YB.VideoApi.prototype.handleSeekStart=function(){try{this.yapi.isJoinSent&&(this.yapi.isSeeking=!0,this.yapi.chrono.seek.start())}catch(e){$YB.error(e)}},$YB.VideoApi.prototype.handleSeekEnd=function(e,t){try{this.yapi.isJoinSent&&(this.yapi.isSeeking=!1,e=e||{},e.duration=$YB.utils.getFirstDefined(e.duration,this.yapi.chrono.seek.getDeltaTime()),e.time=$YB.utils.getFirstDefined(e.time,this.getPlayhead()),this.yapi.comm.sendRequest("/seek",e,t),$YB.notice("Request: NQS /seek "+e.duration+"ms","darkgreen"))}catch(i){$YB.error(i)}},$YB.VideoApi.prototype.getResource=function(){try{return this.yapi.resourceParser&&this.yapi.resourceParser.realResource?this.yapi.resourceParser.realResource:"undefined"!=typeof this.yapi.data.media.resource?this.yapi.data.media.resource:"function"==typeof this.yapi.plugin.getResource?this.yapi.plugin.getResource():""}catch(e){return $YB.warn(e),""}},$YB.VideoApi.prototype.getPlayhead=function(){try{var e=0;return"function"==typeof this.yapi.plugin.getPlayhead&&(e=this.yapi.plugin.getPlayhead()),$YB.utils.parseNumber(e)}catch(t){return $YB.warn(t),0}},$YB.VideoApi.prototype.getMediaDuration=function(){try{var e=0;return"undefined"!=typeof this.yapi.data.media.duration?e=this.yapi.data.media.duration:"function"==typeof this.yapi.plugin.getMediaDuration&&(e=this.yapi.plugin.getMediaDuration()),$YB.utils.parseNumber(e)}catch(t){return $YB.warn(t),0}},$YB.VideoApi.prototype.getIsLive=function(){try{return"undefined"!=typeof this.yapi.data.media.isLive?this.yapi.data.media.isLive:"function"==typeof this.yapi.plugin.getIsLive&&"boolean"==typeof this.yapi.plugin.getIsLive()?this.yapi.plugin.getIsLive():!1}catch(e){return $YB.warn(e),!1}},$YB.VideoApi.prototype.getRendition=function(){try{return"undefined"!=typeof this.yapi.data.media.rendition?this.yapi.data.media.rendition:"function"==typeof this.yapi.plugin.getRendition?this.yapi.plugin.getRendition():""}catch(e){return $YB.warn(e),""}},$YB.VideoApi.prototype.getBitrate=function(){try{var e=-1;if("undefined"!=typeof this.yapi.data.media.bitrate)e=this.yapi.data.media.bitrate;else if("function"!=typeof this.yapi.plugin.getBitrate||-1==this.yapi.plugin.getBitrate()||0==this.yapi.plugin.getBitrate()||isNaN(this.yapi.plugin.getBitrate())){if("undefined"!=typeof this.yapi.plugin.video&&"undefined"!=typeof this.yapi.plugin.video.webkitVideoDecodedByteCount){var t=this.yapi.plugin.video.webkitVideoDecodedByteCount;this.lastBitrate&&(t=Math.round((this.yapi.plugin.video.webkitVideoDecodedByteCount-this.lastBitrate)/5*8)),this.lastBitrate=this.yapi.plugin.video.webkitVideoDecodedByteCount,e=t}}else e=Math.round(this.yapi.plugin.getBitrate());return $YB.utils.parseNumber(e,-1)}catch(i){return $YB.warn(i),-1}},$YB.VideoApi.prototype.getThroughput=function(){try{var e=-1;return"undefined"!=typeof this.yapi.data.media.throughput?e=this.yapi.data.media.throughput:"function"!=typeof this.yapi.plugin.getThroughput||-1==this.yapi.plugin.getThroughput()||0==this.yapi.plugin.getThroughput()||isNaN(this.yapi.plugin.getThroughput())||(e=Math.round(this.yapi.plugin.getThroughput())),$YB.utils.parseNumber(e,-1)}catch(t){return $YB.warn(t),-1}},$YB.VideoApi.prototype.getPlayerVersion=function(){try{if("undefined"==typeof this.yapi.data.playerVersion)return"function"==typeof this.yapi.plugin.getPlayerVersion&&this.yapi.plugin.getPlayerVersion()?this.yapi.plugin.getPlayerVersion():"";res=this.yapi.data.playerVersion}catch(e){return $YB.warn(e),""}},$YB.VideoApi.prototype.getTotalBytes=function(){try{var e=0;return"undefined"!=typeof this.yapi.data.media.totalBytes?e=this.yapi.data.media.totalBytes:"function"==typeof this.yapi.plugin.getTotalBytes&&(e=this.yapi.plugin.getTotalBytes()),$YB.utils.parseNumber(e)}catch(t){return $YB.warn(t),0}},$YB.Api=function(e,t,i){try{if(arguments.length<2||void 0===e||void 0===t)throw"Fatal Error: $YB.Api constructor needs two arguments at least: plugin and playerId";var r="Y-API Modules: [Video] [Ads] [ResourceParser] ";$YB.notice("YouboraJS "+$YB.version+" is ready."),this.plugin=e,this.playerId=t,this.data=$YB.datamap.get(this.playerId),this.data.setOptions(i),this.video=new $YB.VideoApi(this),this.pinger=new $YB.PingApi(this),this.ads=new $YB.AdsApi(this),this.comm=new $YB.Communication(this),this.resourceParser=new $YB.services.ResourceParser(this),this.data.concurrencyConfig.enabled&&(this.concurrency=new $YB.services.Concurrency(this),r+="[Concurrency] "),this.data.resumeConfig.enabled&&(this.resume=new $YB.services.Resume(this),r+="[Resume] "),this.data.smartswitchConfig.enabled&&(this.smartswitch=new $YB.services.Smartswitch(this),r+="[Smartswitch] "),this.comm.requestData({system:this.data.accountCode,pluginVersion:this.plugin.pluginVersion,targetDevice:this.plugin.pluginName,live:this.data.media.isLive}),$YB.notice(r)}catch(s){$YB.error(s)}},$YB.Api.prototype={isStartSent:!1,isJoinSent:!1,isPaused:!1,isSeeking:!1,isBuffering:!1,isAdStartSent:!1,isAdJoinSent:!1,isAdBuffering:!1},$YB.Api.prototype.startAutobuffer=function(){this.autoBuffer=!0,this.video.startAutobuffer(),this.ads.startAdAutobuffer()},$YB.Communication=function(e){try{this.yapi=e,this.host=e.data.service,this.pingTime=5,this.prefix="U",this.code="",this.view=-1,this.preloaders=[],this._requests={},this.addPreloader("FastData")}catch(t){$YB.error(t)}},$YB.Communication.prototype.getViewCode=function(){return this.code?this.prefix+this.code+"_"+this.view:"nocode"},$YB.Communication.prototype.nextView=function(e){return this.view++,e===!0?this.prefix="L":e===!1?this.prefix="V":this.prefix="U",this.getViewCode()},$YB.Communication.prototype.requestData=function(e,t){try{e=e||{},delete e.code;var i=this,r=new $YB.AjaxRequest(this._parseServiceHost(this.host),"/data",e);r.load(function(){i.receiveData(r)}),r.load(t),r.send(),$YB.notice("Request: NQS /data "+e.system,"darkgreen")}catch(s){$YB.error(s)}},$YB.Communication.prototype.receiveData=function(e){try{var t=e.getXHR().responseXML,i=t.getElementsByTagName("h"),r=t.getElementsByTagName("c"),s=t.getElementsByTagName("pt"),a=t.getElementsByTagName("b");i.length>0&&r.length>0&&s.length>0&&a.length>0?(this.prefix=r[0].textContent.slice(0,1),this.code=r[0].textContent.slice(1),this.host=i[0].textContent,this.pingTime=s[0].textContent,this.yapi.pinger.interval=1e3*this.pingTime,this.balancerEnabled=a[0].textContent,$YB.notice("FastData '"+r[0].textContent+"'is ready.","darkgreen"),this._requests.nocode&&this._requests.nocode.length>0&&(this._requests[this.getViewCode()]=this._requests.nocode,delete this._requests.nocode),this.removePreloader("FastData")):$YB.warn("Warning: FastData response is wrong.")}catch(n){$YB.error(n)}},$YB.Communication.prototype.sendRequest=function(e,t,i){try{if(this.isAllowed(e)){t=t||{},delete t.code;var r=new $YB.AjaxRequest("",e,t);r.load(i),this._registerRequest(r)}}catch(s){$YB.error(s)}},$YB.Communication.prototype.sendService=function(e,t,i){try{var r=new $YB.AjaxRequest(this._parseServiceHost(e),"",t);r.load(i),this._registerRequest(r)}catch(s){$YB.error(s)}},$YB.Communication.prototype.isAllowed=function(e){return this.yapi.data.enableAnalytics&&!(e in this.yapi.data.disabledRequests)},$YB.Communication.prototype.addPreloader=function(e){try{this.preloaders.push(e)}catch(t){$YB.error(t)}},$YB.Communication.prototype.removePreloader=function(e){try{var t=this.preloaders.indexOf(e);if(-1!==t){if(this.preloaders.splice(t,1),0===this.preloaders.length){var i;for(var r in this._requests)for(;i=this._requests[r].shift();)i.setParam("code",r),i.host||(i.host=this._parseServiceHost(this.host)),"undefined"!=typeof i.params.resource&&this.yapi.resourceParser.realResource&&(i.params.resource=this.yapi.resourceParser.realResource),"undefined"!=typeof i.params.nodeHost&&this.yapi.resourceParser.nodeHost&&(i.params.nodeHost=this.yapi.resourceParser.nodeHost,i.params.nodeType=this.yapi.resourceParser.nodeType),i.send()}}else $YB.warn("Warning: trying to remove unexisting preloader '"+e+"'.")}catch(s){$YB.error(s)}},$YB.Communication.prototype._registerRequest=function(e){try{return"undefined"==typeof this._requests[this.getViewCode()]&&(this._requests[this.getViewCode()]=[]),e.setParam("timemark",(new Date).getTime()),this._requests[this.getViewCode()].push(e),this._sendRequests(),e}catch(t){$YB.error(t)}},$YB.Communication.prototype._sendRequests=function(){try{if(0===this.preloaders.length){var e;for(var t in this._requests)for(;e=this._requests[t].shift();)e.setParam("code",t),e.host||(e.host=this._parseServiceHost(this.host)),e.send()}}catch(i){$YB.error(i)}},$YB.Communication.prototype._parseServiceHost=function(e){try{return 0===e.indexOf("//")?e=e.slice(2):0===e.indexOf("http://")?e=e.slice(7):0===e.indexOf("https://")&&(e=e.slice(8)),e=this.yapi.data.httpSecure===!0?"https://"+e:this.yapi.data.httpSecure===!1?"http://"+e:"//"+e}catch(t){return $YB.error(t),"http://localhost"}},$YB.Data=function(e){try{this.setOptions(e)}catch(t){$YB.error(t)}},$YB.Data.prototype={enableAnalytics:!0,disabledRequests:[],parseHLS:!1,parseCDNNodeHost:!1,hashTitle:!0,httpSecure:void 0,enableNiceBuffer:!0,accountCode:"demosite",service:"nqs.nice264.com",username:void 0,transactionCode:void 0,isBalanced:0,playerVersion:void 0,network:{cdn:void 0,ip:void 0,isp:void 0},media:{isLive:void 0,resource:void 0,title:void 0,duration:void 0,bitrate:void 0,throughput:void 0,rendition:void 0,totalBytes:void 0},ads:{expected:!1,resource:void 0,campaign:void 0,title:void 0,position:void 0,duration:void 0},properties:{content_id:void 0,content_metadata:{genre:void 0,language:void 0,year:void 0,cast:void 0,director:void 0,owner:void 0,parental:void 0,price:void 0,rating:void 0,audioType:void 0,audioChannels:void 0},transaction_type:void 0,content_type:void 0,device:{manufacturer:void 0,type:void 0,year:void 0,version:void 0,firmware:void 0}},extraParams:{param1:void 0,param2:void 0,param3:void 0,param4:void 0,param5:void 0,param6:void 0,param7:void 0,param8:void 0,param9:void 0,param10:void 0},concurrencyConfig:{enabled:!1,contentId:"",maxConcurrents:1,service:"pc.youbora.com/cping",redirect:"http://www.google.com",ipMode:!1},resumeConfig:{enabled:!1,contentId:"",service:"pc.youbora.com/resume",playTimeService:"pc.youbora.com/playTime",callback:function(e){console.log("ResumeService Callback: Seek to second "+e)}},smartswitchConfig:{enabled:!1,type:"balance",service:"smartswitch.youbora.com",zoneCode:"",originCode:"",niceNVA:"",niceNVB:"",token:""},setOptions:function(e,t){try{if(t=t||this,"undefined"!=typeof e)for(var i in e)"object"==typeof t[i]&&null!==t[i]?this.setOptions(e[i],t[i]):t[i]=e[i]}catch(r){$YB.error(r)}}},$YB.DataMap=function(){this._map={}},$YB.DataMap.prototype.getLength=function(){return this._map.length},$YB.DataMap.prototype.add=function(e,t){return this._map[e]=t},$YB.DataMap.prototype.get=function(e){return e=e||"default",this._map.hasOwnProperty(e)===!1&&this.add(e,new $YB.Data),this._map[e]},$YB.datamap=new $YB.DataMap,$YB.errorLevel=1,$YB.plainConsole=!1,$YB.report=function(e,t,i){if(console&&console.log&&(t=t||4,i=i||"darkcyan",$YB.errorLevel>=t)){if($YB.plainConsole||document.documentMode)console.log("[Youbora:"+t+"] "+e);else{var r=console.log;1==t&&console.error?r=console.error:2==t&&console.warn?r=console.warn:t>=4&&console.debug&&(r=console.debug),null!==e&&"object"==typeof e?r.call(console,"%c[Youbora] %o","color: "+i,e):r.call(console,"%c[Youbora] %c%s","color: "+i,"color: black",e)}"undefined"!=typeof $YB.remoteLog&&$YB.remoteLog.forced===!0&&$YB.remoteLog("[Youbora:"+t+"] "+e)}},$YB.error=function(e,t){$YB.report(e,1,t||"darkred")},$YB.warn=function(e,t){$YB.report(e,2,t||"darkorange")},$YB.notice=function(e,t){$YB.report(e,3,t||"darkcyan")},$YB.debug=function(e,t){$YB.report(e,4,t||"indigo")},$YB.plugins.Generic=function(){this.pluginName="<GENERIC>",this.pluginVersion="5.1-RC-<GENERIC>",this.yapi=void 0,this.player=void 0,this.video=void 0},$YB.plugins.Generic.prototype.playHandler=function(e){try{this.yapi.isStartSent||(this.setOptions(e),this.yapi.video.handleStart())}catch(t){$YB.error(t)}},$YB.plugins.Generic.prototype.videoChangeHandler=function(e){try{this.setOptions(e),this.yapi.video.handleStart()}catch(t){$YB.error(t)}},$YB.plugins.Generic.prototype.joinHandler=function(){try{this.yapi.video.handleJoin()}catch(e){$YB.error(e)}},$YB.plugins.Generic.prototype.playingHandler=function(){try{this.yapi.isStartSent&&(this.yapi.isJoinSent?this.yapi.isSeeking&&this.yapi.isPaused?(this.yapi.video.handleSeekEnd(),this.yapi.video.handleResume()):this.yapi.isSeeking?this.yapi.video.handleSeekEnd():this.yapi.isBuffering?this.yapi.video.handleBufferEnd():this.yapi.isPaused&&this.yapi.video.handleResume():this.yapi.video.handleJoin());
}catch(e){$YB.error(e)}},$YB.plugins.Generic.prototype.pauseHandler=function(){try{this.yapi.video.handlePause()}catch(e){$YB.error(e)}},$YB.plugins.Generic.prototype.pauseToggleHandler=function(){try{this.yapi.isPaused?this.yapi.video.handleResume():this.yapi.video.handlePause()}catch(e){$YB.error(e)}},$YB.plugins.Generic.prototype.resumeHandler=function(){try{this.yapi.video.handleResume()}catch(e){$YB.error(e)}},$YB.plugins.Generic.prototype.endedHandler=function(){try{this.yapi.video.handleStop()}catch(e){$YB.error(e)}},$YB.plugins.Generic.prototype.stopHandler=function(){try{this.yapi.video.handleStop()}catch(e){$YB.error(e)}},$YB.plugins.Generic.prototype.errorHandler=function(e,t){try{"undefined"==typeof e&&(e=0),t=t||"Unknown error",this.yapi.video.handleError({errorCode:e,msg:t}),this.yapi.video.handleStop()}catch(i){$YB.error(i)}},$YB.plugins.Generic.prototype.seekingHandler=function(){try{this.yapi.video.handleSeekStart()}catch(e){$YB.error(e)}},$YB.plugins.Generic.prototype.seekedHandler=function(){try{this.yapi.video.handleSeekEnd()}catch(e){$YB.error(e)}},$YB.plugins.Generic.prototype.bufferingHandler=function(){try{this.yapi.isSeeking||this.yapi.video.handleBufferStart()}catch(e){$YB.error(e)}},$YB.plugins.Generic.prototype.bufferedHandler=function(){try{this.yapi.isStartSent&&(this.yapi.isJoinSent?this.yapi.isSeeking?this.yapi.video.handleSeekEnd():this.yapi.isBuffering&&this.yapi.video.handleBufferEnd():this.yapi.video.handleJoin())}catch(e){$YB.error(e)}},$YB.plugins.Generic.prototype.setOptions=function(e){try{this.yapi.data.setOptions(e)}catch(t){$YB.error(t)}},$YB.plugins.Generic.prototype.getOptions=function(){try{return this.yapi.data}catch(e){$YB.error(e)}},$YB.services.Concurrency=function(e,t){try{this.yapi=e,this.interval=t||1e4,this.timer=null,this.sessionId=Math.random(),this.data=this.yapi.data,this.config=this.yapi.data.concurrencyConfig,this._init()}catch(i){$YB.error(i)}},$YB.services.Concurrency.prototype._init=function(){try{var e=this;this.timer=setInterval(function(){e._checkConcurrency()},this.interval)}catch(t){$YB.error(t)}},$YB.services.Concurrency.prototype._checkConcurrency=function(){try{var e={};e=this.config.ipMode?{accountCode:this.data.accountCode,concurrencyCode:this.config.contentId,concurrencyMaxCount:this.config.maxConcurrents}:{accountCode:this.data.accountCode,concurrencyCode:this.config.contentId,concurrencySessionId:this.sessionId,concurrencyMaxCount:this.config.maxConcurrents};var t=this;this.yapi.comm.sendService(this.config.service,e,function(e){"1"===e.response?(t.yapi.handleError({errorCode:14e3,msg:"CC_KICK"}),"function"==typeof t.config.redirect?t.config.redirect():window.location=t.config.redirect):"0"===e.response||clearInterval(t.timer)})}catch(i){$YB.error(i)}},$YB.services.ResourceParser=function(e){try{this.yapi=e,this.parseTimeout=null,this.realResource="",this.nodeHost=void 0,this.nodeType=void 0,this.cdnRequests={},this.cdns=$YB.services.ResourceParser.cdnsEnabled.slice()}catch(t){$YB.error(t)}},$YB.services.ResourceParser.prototype.init=function(){try{this.realResource&&this.clear(),this.yapi.comm.addPreloader("services.ResourceParser");var e=this;this.parseTimeout=setTimeout(function(){"services.ResourceParser"in e.yapi.comm.preloaders&&(e.realResource=e.yapi.video.getResource(),e.yapi.comm.removePreloader("services.ResourceParser"),$YB.warn("services.ResourceParser has exceded the maximum execution time (3s) and will be aborted."))},3e3),this.realResource=this.yapi.video.getResource(),this.yapi.data.parseHLS?this._parseRealResourceAsync(this.yapi.video.getResource()):this._parseCDNAsync()}catch(t){$YB.error(t)}},$YB.services.ResourceParser.prototype.clear=function(){this.realResource="",this.nodeHost=void 0,this.nodeType=void 0,this.cdnRequests={},this.cdns=$YB.services.ResourceParser.cdnsEnabled.slice()},$YB.services.ResourceParser.prototype._parseRealResourceAsync=function(e,t){try{var i=/(\S*?(\.m3u8|\.m3u|\.ts|\.mp4)(\?\S*|\n|\r|$))/i.exec(e);if(null!==i){var r=i[1].trim();if(0!==r.indexOf("http")&&(r=t.slice(0,t.lastIndexOf("/"))+"/"+r),".m3u8"==i[2]||".m3u"==i[2]){var s=this;new $YB.AjaxRequest(r).load(function(){s._parseRealResourceAsync(this.responseText,r)}).error(function(){s._parseCDNAsync()}).send()}else this.realResource=r,this._parseCDNAsync()}else this._parseCDNAsync()}catch(a){$YB.error(a),this._parseCDNAsync()}},$YB.services.ResourceParser.cdnsEnabled=["Level3","Akamai","Highwinds","Fastly"],$YB.services.ResourceParser.cdnsAvailable={Level3:{parsers:[{type:"host+type",name:"X-WR-DIAG",regex:/Host:(.+)\sType:(.+)/}],headers:{"X-WR-DIAG":"host"}},Akamai:{parsers:[{type:"host+type",name:"X-Cache",regex:/(.+)\sfrom\s.+\(.+\/(.+)\).+/}]},Highwinds:{parsers:[{type:"host+type",name:"X-HW",regex:/.+,[0-9]+\.(.+)\.(.+)/}]},Fastly:{parsers:[{type:"host",name:"X-Served-By",regex:/([^,\s]+)$/},{type:"type",name:"X-Cache",regex:/([^,\s]+)$/}]}},$YB.services.ResourceParser.prototype._parseCDNAsync=function(){try{if(this.yapi.data.parseCDNNodeHost)if(this.cdns.length>0&&!this.nodeHost){var e=this.cdns.shift();if("undefined"!=typeof $YB.services.ResourceParser.cdnsAvailable[e]){var t=$YB.services.ResourceParser.cdnsAvailable[e],i=JSON.stringify(t.headers);if(this.cdnRequests.hasOwnProperty(i))this._parseNode(t.parsers,this.cdnRequests[i]);else{var r=this,s=new $YB.AjaxRequest(this.realResource,"","",{method:"HEAD",maxRetries:0,requestHeaders:t.headers});s.load(function(){r.cdnRequests[i]=s.getXHR(),r._parseNode(t.parsers,s.getXHR())}),s.error(function(){r._parseCDNAsync()}),s.send()}}else this._parseCDNAsync()}else this.yapi.comm.removePreloader("services.ResourceParser");else this.yapi.comm.removePreloader("services.ResourceParser")}catch(a){$YB.error(a)}},$YB.services.ResourceParser.prototype._parseNode=function(e,t){try{for(var i in e){var r=t.getResponseHeader(e[i].name);if(null===r)return void this._parseCDNAsync();var s=e[i].regex.exec(r);if(null===s)return void this._parseCDNAsync();switch(e[i].type){case"host":this.nodeHost=s[1];break;case"type":this.nodeType=this._parseNodeType(s[1]);break;case"host+type":this.nodeHost=s[1],this.nodeType=this._parseNodeType(s[2]);break;case"type+host":this.nodeType=this._parseNodeType(s[1]),this.nodeHost=s[2]}}this._parseCDNAsync()}catch(a){$YB.error(a),this._parseCDNAsync()}},$YB.services.ResourceParser.prototype._parseNodeType=function(e){try{switch(e){case"TCP_HIT":case"HIT":case"c":return 1;case"TCP_MISS":case"MISS":case"p":return 2;case"TCP_MEM_HIT":return 3;case"TCP_IMS_HIT":return 4;default:return 0}}catch(t){return $YB.error(t),0}},$YB.services.Resume=function(e){try{this.yapi=e,this.timer=null,this.isResumed=0,this.data=this.yapi.data,this.config=this.yapi.data.resumeConfig,this._check()}catch(t){$YB.error(t)}},$YB.services.Resume.prototype._check=function(){try{if(this.config.enabled&&"undefined"!=typeof this.config.contentId&&"undefined"!=typeof this.data.username){var e=this;this.yapi.comm.sendService(this.config.service,{contentId:this.config.contentId,userId:this.data.username},function(t){t.response>0?(e.isResumed=1,"function"==typeof e.config.callback?e.config.callback(t.response):$YB.warn("services.Resume callback is not a function")):"0"===t.response||e.stop()}),$YB.notice("Request: services.Resume check "+this.config.contentId,"darkgreen")}else this.stop()}catch(t){$YB.error(t)}},$YB.services.Resume.prototype._sendPlayTime=function(){try{this.config.enabled&&"undefined"!=typeof this.config.contentId&&"undefined"!=typeof this.data.username&&this.yapi.comm.sendService(this.config.playTimeService,{contentId:this.config.contentId,userId:this.data.username,playTime:this.yapi.getPlayhead()})}catch(e){$YB.error(e)}},$YB.services.Resume.prototype.start=function(e){try{e=e||6e3,this._sendPlayTime();var t=this;this.timer=setInterval(function(){t._sendPlayTime()},e)}catch(i){$YB.error(i)}},$YB.services.Resume.prototype.stop=function(){try{clearInterval(this.timer)}catch(e){$YB.error(e)}},$YB.services.Smartswitch=function(e){try{this.yapi=e,this.callback=function(){},this.data=this.yapi.data,this.config=this.yapi.data.smartswitchConfig}catch(t){$YB.error(t)}},$YB.services.Smartswitch.prototype.getBalancedUrls=function(e,t){try{if(this.callback=t,this.config.enabled){var i=this;this.yapi.comm.sendService(this.config.service,{resource:e,systemcode:this.data.accountCode,zonecode:this.config.zoneCode,session:this.yapi.comm.getViewCode(),origincode:this.config.originCode,niceNva:this.config.niceNVA,niceNvb:this.config.niceNVB,live:this.yapi.getIsLive(),token:this.config.token,type:this.config.type},function(e){var t;try{t=JSON.parse(e.response)}catch(r){$YB.warn("Smartswitch said: '"+e.response+"'")}t?(i.data.isBalanced=1,i.callback(t)):i.callback(!1)}),$YB.notice("Request: Smartswitch "+e,"darkgreen")}else this.callback(!1)}catch(r){$YB.error(r)}},$YB.utils.Buffer=function(e,t){try{this.api=e,this.chrono=new $YB.utils.Chrono,this.options=t||{},this.options.interval=this.options.interval||800,this.options.threshold=this.options.threshold||400,this.options.skipMiniBuffer=this.options.skipMiniBuffer||!0,this.timer=null,this.lastPlayhead=0,this.autostart=!1}catch(i){$YB.error(i)}},$YB.utils.Buffer.prototype.start=function(){try{if(null===this.timer)if("function"==typeof this.api.getPlayhead){var e=this;this.lastPlayhead=0,this.chrono.start(),this.timer=setInterval(function(){try{e._checkBuffer()}catch(t){$YB.error(t)}},this.options.interval)}else $YB.warn("Warning: Can't start autobuffer because api does not implement getPlayhead().")}catch(t){$YB.error(t)}},$YB.utils.Buffer.prototype._checkBuffer=function(){try{if(this.api.yapi.isJoinSent&&!this.api.yapi.isPaused&&!this.api.yapi.isSeeking){var e=this.api.getPlayhead();Math.abs(1e3*this.lastPlayhead-1e3*e)>this.options.threshold?(this.lastPlayhead=e,(!this.options.skipMiniBuffer||this.chrono.stop()>1.1*this.options.interval)&&this.api.handleBufferEnd()):this.lastPlayhead&&!this.api.yapi.isBuffering&&Math.abs(1e3*this.lastPlayhead-1e3*e)<this.options.threshold&&this.api.handleBufferStart()}}catch(t){$YB.error(t)}},$YB.utils.Buffer.prototype.stop=function(){try{return clearInterval(this.timer),this.timer=null,this.chrono.stop()}catch(e){$YB.error(e)}},$YB.utils.Chrono=function(){try{this.startTime=0,this.lastTime=0}catch(e){$YB.error(e)}},$YB.utils.Chrono.prototype.getDeltaTime=function(){try{return this.startTime?0===this.lastTime?this.stop():this.lastTime-this.startTime:-1}catch(e){$YB.error(e)}},$YB.utils.Chrono.prototype.start=function(){try{this.startTime=(new Date).getTime(),this.lastTime=0}catch(e){$YB.error(e)}},$YB.utils.Chrono.prototype.stop=function(){try{return this.lastTime=(new Date).getTime(),this.getDeltaTime()}catch(e){$YB.error(e)}},$YB.utils.Chrono.prototype.isStoped=function(){try{return 0!==this.lastTime}catch(e){return $YB.error(e),!1}},$YB.utils.getFirstDefined=function(e){if(arguments.length>1)return $YB.utils.getFirstDefined(arguments);if("undefined"==typeof e||"[object Array]"!==Object.prototype.toString.call(e)&&"[object Arguments]"!==Object.prototype.toString.call(e))return e;for(var t=0;t<e.length;t++){if("function"==typeof e[t]&&"undefined"!=typeof e[t]()&&null!==e[t]())return $YB.utils.getFirstDefined(e[t]());if("undefined"!=typeof e[t]&&null!==e[t])return $YB.utils.getFirstDefined(e[t])}return null},$YB.utils.parseNumber=function(e,t){return"undefined"==typeof t&&(t=0),!isNaN(e)&&e>=0&&e!==1/0&&null!==e&&"undefined"!=typeof e?e:t},$YB.utils.listenAllEvents=$YB.utils.listenAllEvents||function(){},$YB.utils.serialize=$YB.utils.listenAllEvents||function(){},function(){function e(e){switch(e){case"plain":$YB.plainConsole=!0;break;case"remote":$YB.remoteLog.forced=!0;break;case"plain+remote":case"remote+plain":$YB.remoteLog.forced=!0,$YB.plainConsole=!0}}try{if("undefined"!=typeof window){var t=document.getElementsByTagName("script");for(var i in t)if(t[i].getAttribute){var r=t[i].getAttribute("youbora-debug");r&&($YB.errorLevel=r),r=t[i].getAttribute("youbora-console"),r&&e(r)}var s=/\?.*\&*youbora-debug=(.+)/i.exec(window.location.search);null!==s&&($YB.errorLevel=s[1]),s=/\?.*\&*youbora-console=(.+)/i.exec(window.location.search),null!==s&&e(s[1])}}catch(a){$YB.error(a)}}();
/**
 * @license
 * Plugin 5.1.0-tizen-avplay <http://youbora.com/>
 * Copyright NicePopleAtWork <http://nicepeopleatwork.com/>
 */
"undefined"!=typeof $YB&&($YB.plainConsole=!0,$YB.plugins.TizenAvplay=function(e,t){try{this.pluginName="tizen-avplay",this.pluginVersion="5.1.0-tizen-avplay",webapis&&webapis.avplay?(this.yapi=new $YB.Api(this,e,t),this.player=document.getElementById(e),this.video=this.player,$YB.notice("Plugin "+this.pluginVersion+" is ready.")):$YB.error("Fatal Error: webapis.avplay not found!")}catch(i){$YB.error(i)}},$YB.plugins.TizenAvplay.prototype=new $YB.plugins.Generic,$YB.plugins.TizenAvplay.prototype.getPlayhead=function(){return webapis.avplay.getCurrentTime()/1e3},$YB.plugins.TizenAvplay.prototype.getMediaDuration=function(){return webapis.avplay.getDuration()/1e3},$YB.plugins.TizenAvplay.prototype.getPlayerVersion=function(){return"avplay-"+webapis.avplay.getVersion()},$YB.plugins.TizenAvplay.prototype.getBitrate=function(){try{if(webapis.avplay.getCurrentStreamInfo()[0]){var e=JSON.parse(webapis.avplay.getCurrentStreamInfo()[0].extra_info);return e.Bit_rate}return-1}catch(t){return-1}});