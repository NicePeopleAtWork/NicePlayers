/**
 * @license
 * Plugin 5.3.0-theplatform <http://youbora.com/>
 * Copyright NicePopleAtWork <http://nicepeopleatwork.com/>
 */
"undefined"!=typeof $YB&&($YB.plugins.ThePlatform=function(e){try{this.pluginName="theplatform",this.pluginVersion="5.3.0-theplatform",$pdk?(this.startMonitoring(null,e),this.registerListeners()):$YB.error("PDK not found. Youbora needs to be initialized after thePlatform PDK.")}catch(t){$YB.error(t)}},$YB.plugins.ThePlatform.prototype=new $YB.plugins.Generic,$YB.plugins.ThePlatform.prototype.getPlayhead=function(){return this.playhead},$YB.plugins.ThePlatform.prototype.getMediaDuration=function(){return this.duration},$YB.plugins.ThePlatform.prototype.getIsLive=function(){return this.isLive},$YB.plugins.ThePlatform.prototype.getTitle=function(){return this.title},$YB.plugins.ThePlatform.prototype.getResource=function(){return this.resource},$YB.plugins.ThePlatform.prototype.getPlayerVersion=function(){return"ThePlatform "+$pdk.version.toString()},$YB.plugins.ThePlatform.prototype.getBitrate=function(){return this.bitrate},$YB.plugins.ThePlatform.prototype.registerListeners=function(){try{$YB.utils.listenAllEvents($pdk.controller,[null,"OnMediaPause","OnMediaUnpause","OnClipInfoLoaded","OnMediaBuffering","OnMediaEnd","OnMediaError","OnVersionError","OnMediaPlay","OnMediaSeek","OnMediaStart","OnMediaLoadStart","OnResetPlayer","OnReleaseEnd","OnReleaseStart","OnReleaseSelected"]),this.enableBufferMonitor();var e=this;$pdk.controller.addEventListener("OnReleaseStart",function(t){if(e.title=t.data.title,t.data.baseClips){var n=t.data.baseClips[0];e.resource=n.URL,e.duration=n.trueLength/1e3,e.isLive="nonstop"==n.expression,e.bitrate=n.bitrate?n.bitrate:-1}e.playHandler()}),$pdk.controller.addEventListener("OnMediaLoadStart",function(t){t.data.baseClip.isAd?e.ignoringAdHandler():(e.duration=t.data.baseClip.trueLength/1e3,e.bitrate=t.data.baseClip.bitrate?t.data.baseClip.bitrate:-1)}),$pdk.controller.addEventListener("OnMediaEnd",function(t){e.ignoredAdHandler(),e.viewManager.lastResume=(new Date).getTime()}),$pdk.controller.addEventListener("OnMediaPlaying",function(t){e.viewManager.isShowingAds||(e.playhead=t.data.currentTimeAggregate?t.data.currentTimeAggregate/1e3:t.data.currentTime/1e3,e.viewManager.isBuffering||(e.viewManager.isJoinSent?e.viewManager.isSeeking&&e.playhead>e.seekingTo&&e.seekedHandler():e.joinHandler()))}),$pdk.controller.addEventListener("OnMediaPause",function(t){e.pauseHandler()}),$pdk.controller.addEventListener("OnMediaUnpause",function(t){e.resumeHandler()}),$pdk.controller.addEventListener("OnReleaseEnd",function(t){e.endedHandler(),e.resetValues()}),$pdk.controller.addEventListener("OnMediaError",function(t){e.resource=t.data.clip.URL||t.data.baseClip.URL,e.title=t.data.clip.title,e.duration=t.data.clip.mediaLength/1e3,e.errorHandler(t.data.friendlyMessage||t.data.message)}),$pdk.controller.addEventListener("OnMediaSeek",function(t){e.seekingHandler(),e.seekingTo=t.data.end.currentTimeAggregate?t.data.end.currentTimeAggregate/1e3:t.data.end.currentTime/1e3})}catch(t){$YB.error(t)}},$YB.plugins.ThePlatform.prototype.resetValues=function(){this.resource=null,this.title=null,this.duration=null,this.seekingTo=null,this.playhead=null,this.duration=null,this.bitrate=null,this.isLive=null});