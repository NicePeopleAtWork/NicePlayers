<html>

	<head>
		<title>Test Template</title>
		<h4>Test for Player JwPlayer</h4>
		<script src="http://code.jquery.com/jquery-1.10.1.js"></script>
		<script type="text/javascript" src="../testUtils.js"></script>
		<script type="text/javascript" src="http://pre.smartplugin.youbora.com/1.3/js/libs/youbora-data.js"></script>
		<script type="text/javascript" src="http://pre.smartplugin.youbora.com/1.3/js/libs/youbora-api.js"></script>
		<script>
			loadLibraries();
		</script>
		<!-- Player -->
		<!-- <script src="https://ssl.p.jwpcdn.com/7/beta/jwplayer.js"></script> -->
		<script src="http://p.jwpcdn.com/7/beta/2/jwplayer.js"> </script>
		<script>
			jwplayer.key="Owmy+U4JnLEIqwyRXmCiRcluVGH2JPCc4KhpJA==";
		</script>

	</head>

	<body>

		<div id="destinationSet">
			<div style="margin-top:15px">Destination</div>
			<select id="destination">
				<option id="Debug">Debug</option>
				<option id="Production">Production</option>
			</select>
		<div>
		<div id="testTypeSet" style="position: absolute; top: 47px; left: 110px;">
		<div>TestType</div>
			<select id="testType">
				<option id="A">A</option>
				<option id="B">B</option>
				<option id="C">C</option>
				<option id="D">D</option>
				<option id="E">E</option>
				<option id="F">F</option>
				<option id="G">G</option>
				<option id="H">H</option>
				<option id="I">I</option>
			</select>
		</div>
		<div id="technologySet" style="position: absolute; top: 47px; left: 180px;">
		<div>Technology</div>
			<select id="technology">
				<option id="html5">HTML5</option>
				<option id="flash">FLASH</option>
			</select>
		</div>
		<div id="testCodeSet" style="position: absolute; top: 47px; left: 280px;" >
			<div>TestCode</div>
			<input type="text" id="testCode"></input>
		</div>
		<div id="resourceSet" style="position: absolute; top: 47px; left: 450px;" >
			<div>ResourceType</div>
			<select id="resource">
				<option value="http://webb1.nice264.com/npaw/ss_samples/Manifest">MP4</option>
				<option value="http://www.mediacollege.com/video-gallery/testclips/20051210-w50s.flv">FLV</option>
				<option value="rtmp://nws.nice264.com:1935/niceVodBalancer/0082c06e504b0a422bf1_6815f2deeb179c29748af42f8cd5ce95/mp4:0082c06e504b0a422bf1_6815f2deeb179c29748af42f8cd5ce95.mp4">RTMP</option>
				<option value="http://uds.ak.o.brightcove.com/2564185535001/2564185535001_3887452425001_2cad696b-e88f-4cb2-8a04-212f323e7138-ue-0H651CJkX18YEWINXuLuSnu9a6PHstyzSwSb4rpvp-fD7lizSLTppaRcvUPoPgnBbe-RfFVg--10-0.mp4?pubId=2564185535001&videoId=3887441932001">HLS</option>
				<option value="http://localhost:8080/The%20Chemical%20Brothers%20-%20Swoon%20(Boys%20Noize%20Summer%20Mix).mp4">HLS2</option>
			</select>
		</div>
		<div id="pluginVersionSet" style="position: absolute; top: 47px; left: 550px;" >
			<div>PluginVersion</div>
			<select id="pluginVersion" disabled>
				<option value="3.1.3">3.1.3</option>
			</select>
		</div>
		<div style="margin-bottom:20px"></div>
		<button id="play">Play</button>
		<button id="pause">Pause</button>
		<button id="stop">Stop</button>
		<button id="seekfw">SeekForward</button>
		<button id="seekbd">SeekBackwards</button>
		<button id="forceError">ForceError</button>


	
		<div style="width: 480px; height: 270px;" >

			<div id="video_player"></div>

		</div>

		<script>
			player="jwplayer";
			prepareTestEnvironment();
			var resource = getSelectedResource();
			var technology = getTechnology();
			var technologyName = $('#resource').find(":selected").text();
			if(technology ==""){
				technology = "html5";
			}else{
				technology = technology.toLowerCase();
			}
			if(technologyName !="HLS"){
				//Forcing the plugin version is not supported due to the fact that jwplayer will crash
				//if we pass the plugin as a variable
				jwplayer("video_player").setup({
					autostart: "false",
					repeat: "false",
					primary: technology,
					playlist: [{
	                            file: resource,
	                            title: "NicePeopleAtWork Test Framework",
	                        }],
					plugins: {
						"http://pre.smartplugin.youbora.com/1.3/js/all-jwplayer/3.2.0/sp.js": youboraData					
					}
				})
			}else{
				//Forcing the plugin version is not supported due to the fact that jwplayer will crash
				//if we pass the plugin as a variable
				jwplayer("video_player").setup({
		            androidhls: true,
		            file: resource,
		            image: "http://support-static.jwplayer.com/images/jellies.jpg",
		            title: "NicePeopleAtWork Test Framework",
		            width: '80%',
		            aspectratio: '16:9',
		            plugins: {
		            	"http://pre.smartplugin.youbora.com/1.3/js/all-jwplayer/3.2.0/sp.js": youboraData         
	           		}
        		});

			}
		</script>
		
		<script>
			
			
			$( "#play" ).click(function() {
				jwplayer("video_player").play();
			});
			$( "#pause" ).click(function() {
			  jwplayer("video_player").pause();
			});
			$( "#stop" ).click(function() {
				jwplayer("video_player").stop();
			});
			$( "#seekfw" ).click(function() {
				var position = jwplayer("video_player").getPosition();
			  	jwplayer("video_player").seek(position+10);
			});
			$( "#seekbd" ).click(function() {
				var position = jwplayer("video_player").getPosition();
			  jwplayer("video_player").seek(position-10);
			});
			$( "#forceError" ).click(function() {
				var player = jwplayer("video_player");
			  	var newPlayList  = new Array();
		        var playlistIndexRequested = player.getPlaylistIndex(); 
		        for(var i=0; i<player.getPlaylist().length; i++){
		            if(i == player.getPlaylistIndex()){
		                var currentPlayingFile = player.getPlaylistItem();
		                var fakeUrl = "http://fakeUrl.com";
		                currentPlayingFile.file = fakeUrl;
		                currentPlayingFile.sources[0].file= fakeUrl;
		                newPlayList.push(currentPlayingFile);
		            }else{
		                newPlayList.push(player.getPlaylistItem(i));
		            }
		        }
		        player.load(newPlayList);
			});

		</script>
		<h4> JWplayer - HTML5 can be used ONLY with MP4 files, not RTMPT, FLV or HLS</h4>
	</body>

</html>